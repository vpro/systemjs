{"version":3,"sources":["../node_modules/es-module-loader/core/common.js","../node_modules/es-module-loader/core/resolve.js","../node_modules/es-module-loader/core/loader-polyfill.js","../node_modules/es-module-loader/core/register-loader.js","../src/common.js","../src/fetch.js","../src/resolve.js","../src/config.js","../src/evaluate.js","../src/format-helpers.js","../src/instantiate.js","../src/systemjs-loader.js","../src/system.js"],"names":["createSymbol","name","hasSymbol","Symbol","LoaderError__Check_error_message_for_loader_stack","childErr","newMessage","isBrowser","replace","isWindows","err","message","errArgs","fileName","Error","lineNumber","stack","originalErr","isNode","throwResolveError","relUrl","parentUrl","RangeError","resolveIfNotPlain","trim","parentProtocol","substr","indexOf","firstChar","secondChar","length","pathname","parentIsPlain","undefined","segmented","lastIndexOf","output","segmentIndex","i","pop","push","substring","join","match","arrayValues","arr","values","iterator","iterable","keys","Object","keyIndex","next","value","done","Loader","this","registry","Registry","ensureInstantiated","module","ModuleNamespace","TypeError","ensureResolution","resolvedKey","REGISTRY","baseObject","defineProperty","BASE_OBJECT","forEach","extendNamespace","key","enumerable","get","RegisterLoader","call","registryDelete","delete","deleted","records","hasOwnProperty","linkRecord","REGISTER_INTERNAL","lastRegister","trace","createLoadRecord","state","registration","importerSetters","loadError","evalError","instantiatePromise","dependencies","execute","executingRequire","moduleObj","setters","depsInstantiatePromise","dependencyInstantiations","resolveInstantiate","loader","parentKey","Promise","resolve","load","reject","instantiate","then","link","createProcessAnonRegister","INSTANTIATE","instantiation","traceLoad","default","__useDefault","registerDeclarative","catch","addToError","resolveInstantiateDep","traceDepMap","loads","deps","dynamicDeps","depMap","declare","definedExports","declared","global","changed","p","ContextualLoader","exports","instantiateDeps","depsInstantiatePromises","Array","all","setter","deepInstantiateDeps","queueLoad","seen","loadCnt","processLoad","depLoad","id","meta","url","ensureEvaluate","doEvaluate","makeDynamicRequire","depLink","declarativeExecute","configurable","set","require","dynamicExecute","moduleDefault","__esModule","nullContext","e","noop","protectedCreateNamespace","bindings","warn","msg","force","warnings","console","checkInstantiateWasm","wasmBuffer","processAnonRegister","bytes","Uint8Array","WebAssembly","compile","m","importObj","Module","imports","register","_export","Instance","loadNodeModule","baseURL","parentModuleContext","_nodeRequire","base","decodeURI","paths","_nodeModulePaths","extend","a","b","prepend","extendMeta","_prepend","val","concat","preloadScript","supportsPreload","supportsPrefetch","document","createElement","rel","as","href","head","appendChild","removeChild","Image","src","workerImport","importScripts","scriptLoad","crossOrigin","integrity","cleanup","error","loadingScripts","splice","script","removeEventListener","isWorker","type","charset","async","addEventListener","readMemberExpression","pParts","split","shift","applyPaths","mapMatch","getMapMatch","target","resolved","baseURI","checkMap","curLen","len","map","bestMatch","xhrFetch","authorization","asBuffer","xhr","response","responseText","status","statusText","XMLHttpRequest","responseType","onreadystatechange","readyState","open","setRequestHeader","withCredentials","send","createMetadata","pluginKey","pluginArgument","pluginModule","packageKey","packageConfig","getParentMetadata","config","parentMetadata","parentPluginIndex","pluginFirst","packages","decanonicalize","parsed","parsePlugin","plugin","combinePluginParts","coreResolve","argument","normalizeSync","CONFIG","metadata","packageResolveSync","doMap","packageName","relativeResolved","has","trailingSlash","skipExtensions","parentMap","parentMapMatch","mapped","doMapSync","normalized","pkgConfigMatch","getPackageConfigMatch","packageConfigKeys","createPackage","subPath","applyPackageConfigSync","packageResolve","resolvedPromise","createMeta","format","configured","loadPackageConfigPath","configPath","applyPackageConfig","extension","globals","nonce","sourceMap","encapsulateGlobal","cjsRequireDetection","cjsDeferDepsExecute","esModule","setMeta","wildcardIndex","bestDepth","depth","getMetaMatches","metaPattern","matchMeta","matchDepth","argumentKey","pluginIndex","addDefaultExtension","pkg","pkgKey","defaultExtension","metaMatch","main","mapPath","validMapping","path","interpolateConditional","conditionPromises","conditions","c","parseCondition","condition","prototype","import","conditionValues","prop","negate","createPkgConfigPathObj","lastWildcard","Math","max","regEx","RegExp","wildcard","exactMatch","packageConfigPaths","packageConfigPath","pkgConfigPath","configLoader","pluginLoader","pkgConfig","setPkgConfig","pkgMeta","matchFn","dotRel","exactMeta","conditionExport","conditionModule","negation","conditionExportIndex","sysConditions","resolveCondition","conditionObj","bool","conditionalMatch","interpolationRegEx","conditionValue","envSet","cfg","envCallback","envConfigNames","envConfig","envModule","cloneObj","obj","maxDepth","clone","getConfigItem","cfgItem","pkgName","prependConfig","inlineSourceMap","sourceMapString","hasBuffer","sourceMapPrefix","Buffer","toString","btoa","unescape","encodeURIComponent","getSource","source","address","wrap","lastLineIndex","JSON","stringify","scriptExec","body","documentElement","text","onerror","window","_e","apply","arguments","preExec","setAttribute","postExec","callCounter","curSystem","System","SystemJS","evaluate","noWrap","supportsScriptExec","vm","useVm","runInThisContext","filename","eval","stripOrigin","windowOrigin","requireResolve","request","parentId","getPathVars","moduleId","dirname","getCJSDeps","inLocation","locations","index","cjsRequireRegEx","lastIndex","commentRegEx","stringRegEx","stringLocations","commentLocations","exec","dep","globalIterator","globalName","ignoredGlobalProps","getGlobalValue","globalValue","prepareGlobal","moduleName","encapsulate","curDefine","define","oldGlobals","g","globalSnapshot","singleGlobal","multipleExports","amdGetCJSDeps","requireIndex","requireAlias","fnBracketRegEx","wsRegEx","requireRegEx","requireRegExs","cjsRequirePre","cjsRequirePost","wrapEsModuleExecute","clearLastDefine","metaDeps","curMetaDeps","curEsModule","lastNamedDefine","multipleNamedDefines","registerLastDefine","registerDynamic","setMetaEsModule","moduleValue","initializePlugin","pluginLoad","loadBundlesAndDepCache","depCache","normalize","matched","bundles","curModule","parts","runFetchPipeline","wasm","locate","fetch","fetched","wasmInstantiated","stringSource","TextDecoder","decode","translateAndInstantiate","readMetaSyntax","translate","traceOpts","translated","sanitizeSourceMap","detectRegisterFormat","esmRegEx","transpile","calledInstantiate","result","detectLegacyFormat","registered","emptyModule","parse","newModule","amdDefine","pathVars","__cjsWrapper","args","cjsWrapper","hashBangRegEx","gl","exportName","retrieveGlobal","leadingCommentAndMeta","leadingCommentAndMetaRegEx","amdRegEx","cjsExportsRegEx","originalName","file","sources","transpiler","depsPrefix","setMetaProperty","curPart","metaRegEx","metaParts","metaPartRegEx","metaString","metaName","metaValue","SystemJSLoader","_loader","METADATA","production","loadedBundles","scriptSrc","nodeRequire","setProduction","formatHelpers","isProduction","isBuilder","browser","node","dev","build","registryWarn","method","process","versions","platform","envGlobal","self","getElementsByTagName","bases","location","slashIndex","cwd","constructor","parent","RESOLVE_INSTANTIATE","RESOLVE","iteratorSupport","entries","namespace","create","toStringTag","instantiated","freeze","hasStringTag","relList","supports","fs","fetchFunction","hasXhr","fetch$1","opts","headers","Accept","credentials","res","ok","arrayBuffer","readFile","data","dataString","chrome","navigator","userAgent","names","callback","errback","referer","dynamicRequires","modules","factory","req","depValues","uri","moduleIndex","exportsIndex","contextualRequire","toUrl","curRequire","bind","amd","amdRequire","protocol","hostname","port","supportsScriptLoad","scripts","curScript","currentScript","defer","__filename","booleanIndex","resolveSync","isEnvConfig","defaultJSExtensions","v","packageLength","bundle","configNames","getConfig","configName","configItem","hasProxy","Proxy","option","isModule","version"],"mappings":"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","sourcesContent":["/*\n * Environment\n */\nexport var isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined';\nexport var isNode = typeof process !== 'undefined' && process.versions && process.versions.node;\nexport var isWindows = typeof process !== 'undefined' && typeof process.platform === 'string' && process.platform.match(/^win/);\n\nvar envGlobal = typeof self !== 'undefined' ? self : global;\nexport { envGlobal as global }\n\n/*\n * Simple Symbol() shim\n */\nvar hasSymbol = typeof Symbol !== 'undefined';\nexport function createSymbol (name) {\n  return hasSymbol ? Symbol() : '@@' + name;\n}\n\nexport function pathToFileUrl (filePath) {\n  return 'file://' + (isWindows ? '/' : '') + (isWindows ? filePath.replace(/\\\\/g, '/') : filePath);\n}\n\nexport function fileUrlToPath (fileUrl) {\n  if (fileUrl.substr(0, 7) !== 'file://')\n    throw new RangeError(fileUrl + ' is not a valid file url');\n  if (isWindows)\n    return fileUrl.substr(8).replace(/\\\\/g, '/');\n  else\n    return fileUrl.substr(7);\n}\n\n/*\n * Environment baseURI\n */\nexport var baseURI;\n\n// environent baseURI detection\nif (typeof document != 'undefined' && document.getElementsByTagName) {\n  baseURI = document.baseURI;\n\n  if (!baseURI) {\n    var bases = document.getElementsByTagName('base');\n    baseURI = bases[0] && bases[0].href || window.location.href;\n  }\n}\nelse if (typeof location != 'undefined') {\n  baseURI = location.href;\n}\n\n// sanitize out the hash and querystring\nif (baseURI) {\n  baseURI = baseURI.split('#')[0].split('?')[0];\n  var slashIndex = baseURI.lastIndexOf('/');\n  if (slashIndex !== -1)\n    baseURI = baseURI.substr(0, slashIndex + 1);\n}\nelse if (typeof process !== 'undefined' && process.cwd) {\n  baseURI = 'file://' + (isWindows ? '/' : '') + process.cwd();\n  if (isWindows)\n    baseURI = baseURI.replace(/\\\\/g, '/');\n}\nelse {\n  throw new TypeError('No environment baseURI');\n}\n\n// ensure baseURI has trailing \"/\"\nif (baseURI[baseURI.length - 1] !== '/')\n  baseURI += '/';\n\n/*\n * LoaderError with chaining for loader stacks\n */\nvar errArgs = new Error(0, '_').fileName == '_';\nfunction LoaderError__Check_error_message_for_loader_stack (childErr, newMessage) {\n  // Convert file:/// URLs to paths in Node\n  if (!isBrowser)\n    newMessage = newMessage.replace(isWindows ? /file:\\/\\/\\//g : /file:\\/\\//g, '');\n\n  var message = (childErr.message || childErr) + '\\n  ' + newMessage;\n\n  var err;\n  if (errArgs && childErr.fileName)\n    err = new Error(message, childErr.fileName, childErr.lineNumber);\n  else\n    err = new Error(message);\n\n\n  var stack = childErr.originalErr ? childErr.originalErr.stack : childErr.stack;\n\n  if (isNode)\n    // node doesn't show the message otherwise\n    err.stack = message + '\\n  ' + stack;\n  else\n    err.stack = stack;\n\n  err.originalErr = childErr.originalErr || childErr;\n\n  return err;\n}\nexport { LoaderError__Check_error_message_for_loader_stack as addToError }\n","import { isNode } from './common.js';\n\n/*\n * Optimized URL normalization assuming a syntax-valid URL parent\n */\nfunction throwResolveError (relUrl, parentUrl) {\n  throw new RangeError('Unable to resolve \"' + relUrl + '\" to ' + parentUrl);\n}\nexport function resolveIfNotPlain (relUrl, parentUrl) {\n  relUrl = relUrl.trim();\n  var parentProtocol = parentUrl && parentUrl.substr(0, parentUrl.indexOf(':') + 1);\n\n  var firstChar = relUrl[0];\n  var secondChar = relUrl[1];\n\n  // protocol-relative\n  if (firstChar === '/' && secondChar === '/') {\n    if (!parentProtocol)\n      throwResolveError(relUrl, parentUrl);\n    return parentProtocol + relUrl;\n  }\n  // relative-url\n  else if (firstChar === '.' && (secondChar === '/' || secondChar === '.' && (relUrl[2] === '/' || relUrl.length === 2 && (relUrl += '/')) ||\n      relUrl.length === 1  && (relUrl += '/')) ||\n      firstChar === '/') {\n    var parentIsPlain = !parentProtocol || parentUrl[parentProtocol.length] !== '/';\n\n    // read pathname from parent if a URL\n    // pathname taken to be part after leading \"/\"\n    var pathname;\n    if (parentIsPlain) {\n      // resolving to a plain parent -> skip standard URL prefix, and treat entire parent as pathname\n      if (parentUrl === undefined)\n        throwResolveError(relUrl, parentUrl);\n      pathname = parentUrl;\n    }\n    else if (parentUrl[parentProtocol.length + 1] === '/') {\n      // resolving to a :// so we need to read out the auth and host\n      if (parentProtocol !== 'file:') {\n        pathname = parentUrl.substr(parentProtocol.length + 2);\n        pathname = pathname.substr(pathname.indexOf('/') + 1);\n      }\n      else {\n        pathname = parentUrl.substr(8);\n      }\n    }\n    else {\n      // resolving to :/ so pathname is the /... part\n      pathname = parentUrl.substr(parentProtocol.length + 1);\n    }\n\n    if (firstChar === '/') {\n      if (parentIsPlain)\n        throwResolveError(relUrl, parentUrl);\n      else\n        return parentUrl.substr(0, parentUrl.length - pathname.length - 1) + relUrl;\n    }\n\n    // join together and split for removal of .. and . segments\n    // looping the string instead of anything fancy for perf reasons\n    // '../../../../../z' resolved to 'x/y' is just 'z' regardless of parentIsPlain\n    var segmented = pathname.substr(0, pathname.lastIndexOf('/') + 1) + relUrl;\n\n    var output = [];\n    var segmentIndex = -1;\n\n    for (var i = 0; i < segmented.length; i++) {\n      // busy reading a segment - only terminate on '/'\n      if (segmentIndex !== -1) {\n        if (segmented[i] === '/') {\n          output.push(segmented.substring(segmentIndex, i + 1));\n          segmentIndex = -1;\n        }\n        continue;\n      }\n\n      // new segment - check if it is relative\n      if (segmented[i] === '.') {\n        // ../ segment\n        if (segmented[i + 1] === '.' && segmented[i + 2] === '/') {\n          output.pop();\n          i += 2;\n        }\n        // ./ segment\n        else if (segmented[i + 1] === '/') {\n          i += 1;\n        }\n        else {\n          // the start of a new segment as below\n          segmentIndex = i;\n          continue;\n        }\n\n        // this is the plain URI backtracking error (../, package:x -> error)\n        if (parentIsPlain && output.length === 0)\n          throwResolveError(relUrl, parentUrl);\n\n        // trailing . or .. segment\n        if (i === segmented.length)\n          output.push('');\n        continue;\n      }\n\n      // it is the start of a new segment\n      segmentIndex = i;\n    }\n    // finish reading out the last segment\n    if (segmentIndex !== -1)\n      output.push(segmented.substr(segmentIndex));\n\n    return parentUrl.substr(0, parentUrl.length - pathname.length) + output.join('');\n  }\n\n  // sanitizes and verifies (by returning undefined if not a valid URL-like form)\n  // Windows filepath compatibility is an added convenience here\n  var protocolIndex = relUrl.indexOf(':');\n  if (protocolIndex !== -1) {\n    if (isNode) {\n      // C:\\x becomes file:///c:/x (we don't support C|\\x)\n      if (relUrl[1] === ':' && relUrl[2] === '\\\\' && relUrl[0].match(/[a-z]/i))\n        return 'file:///' + relUrl.replace(/\\\\/g, '/');\n    }\n    return relUrl;\n  }\n}\n","import { addToError, createSymbol } from './common.js';\n\nexport { Loader, ModuleNamespace, REGISTRY }\n\nvar resolvedPromise = Promise.resolve();\n\n/*\n * Simple Array values shim\n */\nfunction arrayValues (arr) {\n  if (arr.values)\n    return arr.values();\n\n  if (typeof Symbol === 'undefined' || !Symbol.iterator)\n    throw new Error('Symbol.iterator not supported in this browser');\n\n  var iterable = {};\n  iterable[Symbol.iterator] = function () {\n    var keys = Object.keys(arr);\n    var keyIndex = 0;\n    return {\n      next: function () {\n        if (keyIndex < keys.length)\n          return {\n            value: arr[keys[keyIndex++]],\n            done: false\n          };\n        else\n          return {\n            value: undefined,\n            done: true\n          };\n      }\n    };\n  };\n  return iterable;\n}\n\n/*\n * 3. Reflect.Loader\n *\n * We skip the entire native internal pipeline, just providing the bare API\n */\n// 3.1.1\nfunction Loader () {\n  this.registry = new Registry();\n}\n// 3.3.1\nLoader.prototype.constructor = Loader;\n\nfunction ensureInstantiated (module) {\n  if (!(module instanceof ModuleNamespace))\n    throw new TypeError('Module instantiation did not return a valid namespace object.');\n  return module;\n}\n\n// 3.3.2\nLoader.prototype.import = function (key, parent) {\n  if (typeof key !== 'string')\n    throw new TypeError('Loader import method must be passed a module key string');\n  // custom resolveInstantiate combined hook for better perf\n  var loader = this;\n  return resolvedPromise\n  .then(function () {\n    return loader[RESOLVE_INSTANTIATE](key, parent);\n  })\n  .then(ensureInstantiated)\n  //.then(Module.evaluate)\n  .catch(function (err) {\n    throw addToError(err, 'Loading ' + key + (parent ? ' from ' + parent : ''));\n  });\n};\n// 3.3.3\nvar RESOLVE = Loader.resolve = createSymbol('resolve');\n\n/*\n * Combined resolve / instantiate hook\n *\n * Not in current reduced spec, but necessary to separate RESOLVE from RESOLVE + INSTANTIATE as described\n * in the spec notes of this repo to ensure that loader.resolve doesn't instantiate when not wanted.\n *\n * We implement RESOLVE_INSTANTIATE as a single hook instead of a separate INSTANTIATE in order to avoid\n * the need for double registry lookups as a performance optimization.\n */\nvar RESOLVE_INSTANTIATE = Loader.resolveInstantiate = createSymbol('resolveInstantiate');\n\n// default resolveInstantiate is just to call resolve and then get from the registry\n// this provides compatibility for the resolveInstantiate optimization\nLoader.prototype[RESOLVE_INSTANTIATE] = function (key, parent) {\n  var loader = this;\n  return loader.resolve(key, parent)\n  .then(function (resolved) {\n    return loader.registry.get(resolved);\n  });\n};\n\nfunction ensureResolution (resolvedKey) {\n  if (resolvedKey === undefined)\n    throw new RangeError('No resolution found.');\n  return resolvedKey;\n}\n\nLoader.prototype.resolve = function (key, parent) {\n  var loader = this;\n  return resolvedPromise\n  .then(function() {\n    return loader[RESOLVE](key, parent);\n  })\n  .then(ensureResolution)\n  .catch(function (err) {\n    throw addToError(err, 'Resolving ' + key + (parent ? ' to ' + parent : ''));\n  });\n};\n\n// 3.3.4 (import without evaluate)\n// this is not documented because the use of deferred evaluation as in Module.evaluate is not\n// documented, as it is not considered a stable feature to be encouraged\n// Loader.prototype.load may well be deprecated if this stays disabled\n/* Loader.prototype.load = function (key, parent) {\n  return Promise.resolve(this[RESOLVE_INSTANTIATE](key, parent || this.key))\n  .catch(function (err) {\n    throw addToError(err, 'Loading ' + key + (parent ? ' from ' + parent : ''));\n  });\n}; */\n\n/*\n * 4. Registry\n *\n * Instead of structuring through a Map, just use a dictionary object\n * We throw for construction attempts so this doesn't affect the public API\n *\n * Registry has been adjusted to use Namespace objects over ModuleStatus objects\n * as part of simplifying loader API implementation\n */\nvar iteratorSupport = typeof Symbol !== 'undefined' && Symbol.iterator;\nvar REGISTRY = createSymbol('registry');\nfunction Registry() {\n  this[REGISTRY] = {};\n}\n// 4.4.1\nif (iteratorSupport) {\n  // 4.4.2\n  Registry.prototype[Symbol.iterator] = function () {\n    return this.entries()[Symbol.iterator]();\n  };\n\n  // 4.4.3\n  Registry.prototype.entries = function () {\n    var registry = this[REGISTRY];\n    return arrayValues(Object.keys(registry).map(function (key) {\n      return [key, registry[key]];\n    }));\n  };\n}\n\n// 4.4.4\nRegistry.prototype.keys = function () {\n  return arrayValues(Object.keys(this[REGISTRY]));\n};\n// 4.4.5\nRegistry.prototype.values = function () {\n  var registry = this[REGISTRY];\n  return arrayValues(Object.keys(registry).map(function (key) {\n    return registry[key];\n  }));\n};\n// 4.4.6\nRegistry.prototype.get = function (key) {\n  return this[REGISTRY][key];\n};\n// 4.4.7\nRegistry.prototype.set = function (key, namespace) {\n  if (!(namespace instanceof ModuleNamespace))\n    throw new Error('Registry must be set with an instance of Module Namespace');\n  this[REGISTRY][key] = namespace;\n  return this;\n};\n// 4.4.8\nRegistry.prototype.has = function (key) {\n  return Object.hasOwnProperty.call(this[REGISTRY], key);\n};\n// 4.4.9\nRegistry.prototype.delete = function (key) {\n  if (Object.hasOwnProperty.call(this[REGISTRY], key)) {\n    delete this[REGISTRY][key];\n    return true;\n  }\n  return false;\n};\n\n/*\n * Simple ModuleNamespace Exotic object based on a baseObject\n * We export this for allowing a fast-path for module namespace creation over Module descriptors\n */\n// var EVALUATE = createSymbol('evaluate');\nvar BASE_OBJECT = createSymbol('baseObject');\n\n// 8.3.1 Reflect.Module\n/*\n * Best-effort simplified non-spec implementation based on\n * a baseObject referenced via getters.\n *\n * Allows:\n *\n *   loader.registry.set('x', new Module({ default: 'x' }));\n *\n * Optional evaluation function provides experimental Module.evaluate\n * support for non-executed modules in registry.\n */\nfunction ModuleNamespace (baseObject/*, evaluate*/) {\n  Object.defineProperty(this, BASE_OBJECT, {\n    value: baseObject\n  });\n\n  // evaluate defers namespace population\n  /* if (evaluate) {\n    Object.defineProperty(this, EVALUATE, {\n      value: evaluate,\n      configurable: true,\n      writable: true\n    });\n  }\n  else { */\n    Object.keys(baseObject).forEach(extendNamespace, this);\n  //}\n};\n// 8.4.2\nModuleNamespace.prototype = Object.create(null);\n\nif (typeof Symbol !== 'undefined' && Symbol.toStringTag)\n  Object.defineProperty(ModuleNamespace.prototype, Symbol.toStringTag, {\n    value: 'Module'\n  });\n\nfunction extendNamespace (key) {\n  Object.defineProperty(this, key, {\n    enumerable: true,\n    get: function () {\n      return this[BASE_OBJECT][key];\n    }\n  });\n}\n\n/* function doEvaluate (evaluate, context) {\n  try {\n    evaluate.call(context);\n  }\n  catch (e) {\n    return e;\n  }\n}\n\n// 8.4.1 Module.evaluate... not documented or used because this is potentially unstable\nModule.evaluate = function (ns) {\n  var evaluate = ns[EVALUATE];\n  if (evaluate) {\n    ns[EVALUATE] = undefined;\n    var err = doEvaluate(evaluate);\n    if (err) {\n      // cache the error\n      ns[EVALUATE] = function () {\n        throw err;\n      };\n      throw err;\n    }\n    Object.keys(ns[BASE_OBJECT]).forEach(extendNamespace, ns);\n  }\n  // make chainable\n  return ns;\n}; */\n","import { Loader, ModuleNamespace, REGISTRY } from './loader-polyfill.js';\nimport { resolveIfNotPlain } from './resolve.js';\nimport { addToError, global, createSymbol, baseURI } from './common.js';\n\nexport default RegisterLoader;\n\n/*\n * Register Loader\n *\n * Builds directly on top of loader polyfill to provide:\n * - loader.register support\n * - hookable higher-level resolve\n * - instantiate hook returning a ModuleNamespace or undefined for es module loading\n * - loader error behaviour as in HTML and loader specs, caching load and eval errors separately\n * - build tracing support by providing a .trace=true and .loads object format\n */\n\nvar REGISTER_INTERNAL = createSymbol('register-internal');\n\nfunction RegisterLoader () {\n  Loader.call(this);\n\n  var registryDelete = this.registry.delete;\n  this.registry.delete = function (key) {\n    var deleted = registryDelete.call(this, key);\n\n    // also delete from register registry if linked\n    if (records.hasOwnProperty(key) && !records[key].linkRecord) {\n      delete records[key];\n      deleted = true;\n    }\n\n    return deleted;\n  };\n\n  var records = {};\n\n  this[REGISTER_INTERNAL] = {\n    // last anonymous System.register call\n    lastRegister: undefined,\n    // in-flight es module load records\n    records: records\n  };\n\n  // tracing\n  this.trace = false;\n}\n\nRegisterLoader.prototype = Object.create(Loader.prototype);\nRegisterLoader.prototype.constructor = RegisterLoader;\n\nvar INSTANTIATE = RegisterLoader.instantiate = createSymbol('instantiate');\n\n// default normalize is the WhatWG style normalizer\nRegisterLoader.prototype[RegisterLoader.resolve = Loader.resolve] = function (key, parentKey) {\n  return resolveIfNotPlain(key, parentKey || baseURI);\n};\n\nRegisterLoader.prototype[INSTANTIATE] = function (key, processAnonRegister) {};\n\n// once evaluated, the linkRecord is set to undefined leaving just the other load record properties\n// this allows tracking new binding listeners for es modules through importerSetters\n// for dynamic modules, the load record is removed entirely.\nfunction createLoadRecord (state, key, registration) {\n  return state.records[key] = {\n    key: key,\n\n    // defined System.register cache\n    registration: registration,\n\n    // module namespace object\n    module: undefined,\n\n    // es-only\n    // this sticks around so new module loads can listen to binding changes\n    // for already-loaded modules by adding themselves to their importerSetters\n    importerSetters: undefined,\n\n    loadError: undefined,\n    evalError: undefined,\n\n    // in-flight linking record\n    linkRecord: {\n      // promise for instantiated\n      instantiatePromise: undefined,\n      dependencies: undefined,\n      execute: undefined,\n      executingRequire: false,\n\n      // underlying module object bindings\n      moduleObj: undefined,\n\n      // es only, also indicates if es or not\n      setters: undefined,\n\n      // promise for instantiated dependencies (dependencyInstantiations populated)\n      depsInstantiatePromise: undefined,\n      // will be the array of dependency load record or a module namespace\n      dependencyInstantiations: undefined,\n\n      // NB optimization and way of ensuring module objects in setters\n      // indicates setters which should run pre-execution of that dependency\n      // setters is then just for completely executed module objects\n      // alternatively we just pass the partially filled module objects as\n      // arguments into the execute function\n      // hoisted: undefined\n    }\n  };\n}\n\nRegisterLoader.prototype[Loader.resolveInstantiate] = function (key, parentKey) {\n  var loader = this;\n  var state = this[REGISTER_INTERNAL];\n  var registry = this.registry[REGISTRY];\n\n  return resolveInstantiate(loader, key, parentKey, registry, state)\n  .then(function (instantiated) {\n    if (instantiated instanceof ModuleNamespace)\n      return instantiated;\n\n    // resolveInstantiate always returns a load record with a link record and no module value\n    var link = instantiated.linkRecord;\n\n    // if already beaten to done, return\n    if (!link) {\n      if (instantiated.module)\n        return instantiated.module;\n      throw instantiated.evalError;\n    }\n\n    return deepInstantiateDeps(loader, instantiated, link, registry, state)\n    .then(function () {\n      return ensureEvaluate(loader, instantiated, link, registry, state, undefined);\n    });\n  });\n};\n\nfunction resolveInstantiate (loader, key, parentKey, registry, state) {\n  // normalization shortpath for already-normalized key\n  // could add a plain name filter, but doesn't yet seem necessary for perf\n  var module = registry[key];\n  if (module)\n    return Promise.resolve(module);\n\n  var load = state.records[key];\n\n  // already linked but not in main registry is ignored\n  if (load && !load.module) {\n    if (load.loadError)\n      return Promise.reject(load.loadError);\n    return instantiate(loader, load, load.linkRecord, registry, state);\n  }\n\n  return loader.resolve(key, parentKey)\n  .then(function (resolvedKey) {\n    // main loader registry always takes preference\n    module = registry[resolvedKey];\n    if (module)\n      return module;\n\n    load = state.records[resolvedKey];\n\n    // already has a module value but not already in the registry (load.module)\n    // means it was removed by registry.delete, so we should\n    // disgard the current load record creating a new one over it\n    // but keep any existing registration\n    if (!load || load.module)\n      load = createLoadRecord(state, resolvedKey, load && load.registration);\n\n    if (load.loadError)\n      return Promise.reject(load.loadError);\n\n    var link = load.linkRecord;\n    if (!link)\n      return load;\n\n    return instantiate(loader, load, link, registry, state);\n  });\n}\n\nfunction createProcessAnonRegister (loader, load, state) {\n  return function () {\n    var lastRegister = state.lastRegister;\n\n    if (!lastRegister)\n      return !!load.registration;\n\n    state.lastRegister = undefined;\n    load.registration = lastRegister;\n\n    return true;\n  };\n}\n\nfunction instantiate (loader, load, link, registry, state) {\n  return link.instantiatePromise || (link.instantiatePromise =\n  // if there is already an existing registration, skip running instantiate\n  (load.registration ? Promise.resolve() : Promise.resolve().then(function () {\n    state.lastRegister = undefined;\n    return loader[INSTANTIATE](load.key, loader[INSTANTIATE].length > 1 && createProcessAnonRegister(loader, load, state));\n  }))\n  .then(function (instantiation) {\n    // direct module return from instantiate -> we're done\n    if (instantiation !== undefined) {\n      if (!(instantiation instanceof ModuleNamespace))\n        throw new TypeError('Instantiate did not return a valid Module object.');\n\n      delete state.records[load.key];\n      if (loader.trace)\n        traceLoad(loader, load, link);\n      return registry[load.key] = instantiation;\n    }\n\n    // run the cached loader.register declaration if there is one\n    var registration = load.registration;\n    // clear to allow new registrations for future loads (combined with registry delete)\n    load.registration = undefined;\n    if (!registration)\n      throw new TypeError('Module instantiation did not call an anonymous or correctly named System.register.');\n\n    link.dependencies = registration[0];\n\n    load.importerSetters = [];\n\n    link.moduleObj = {};\n\n    // process System.registerDynamic declaration\n    if (registration[2]) {\n      link.moduleObj.default = link.moduleObj.__useDefault = {};\n      link.executingRequire = registration[1];\n      link.execute = registration[2];\n    }\n\n    // process System.register declaration\n    else {\n      registerDeclarative(loader, load, link, registration[1]);\n    }\n\n    return load;\n  })\n  .catch(function (err) {\n    load.linkRecord = undefined;\n    throw load.loadError = load.loadError || addToError(err, 'Instantiating ' + load.key);\n  }));\n}\n\n// like resolveInstantiate, but returning load records for linking\nfunction resolveInstantiateDep (loader, key, parentKey, registry, state, traceDepMap) {\n  // normalization shortpaths for already-normalized key\n  // DISABLED to prioritise consistent resolver calls\n  // could add a plain name filter, but doesn't yet seem necessary for perf\n  /* var load = state.records[key];\n  var module = registry[key];\n\n  if (module) {\n    if (traceDepMap)\n      traceDepMap[key] = key;\n\n    // registry authority check in case module was deleted or replaced in main registry\n    if (load && load.module && load.module === module)\n      return load;\n    else\n      return module;\n  }\n\n  // already linked but not in main registry is ignored\n  if (load && !load.module) {\n    if (traceDepMap)\n      traceDepMap[key] = key;\n    return instantiate(loader, load, load.linkRecord, registry, state);\n  } */\n  return loader.resolve(key, parentKey)\n  .then(function (resolvedKey) {\n    if (traceDepMap)\n      traceDepMap[key] = resolvedKey;\n\n    // normalization shortpaths for already-normalized key\n    var load = state.records[resolvedKey];\n    var module = registry[resolvedKey];\n\n    // main loader registry always takes preference\n    if (module && (!load || load.module && module !== load.module))\n      return module;\n\n    if (load && load.loadError)\n      throw load.loadError;\n\n    // already has a module value but not already in the registry (load.module)\n    // means it was removed by registry.delete, so we should\n    // disgard the current load record creating a new one over it\n    // but keep any existing registration\n    if (!load || !module && load.module)\n      load = createLoadRecord(state, resolvedKey, load && load.registration);\n\n    var link = load.linkRecord;\n    if (!link)\n      return load;\n\n    return instantiate(loader, load, link, registry, state);\n  });\n}\n\nfunction traceLoad (loader, load, link) {\n  loader.loads = loader.loads || {};\n  loader.loads[load.key] = {\n    key: load.key,\n    deps: link.dependencies,\n    dynamicDeps: [],\n    depMap: link.depMap || {}\n  };\n}\n\n/*\n * Convert a CJS module.exports into a valid object for new Module:\n *\n *   new Module(getEsModule(module.exports))\n *\n * Sets the default value to the module, while also reading off named exports carefully.\n */\nfunction registerDeclarative (loader, load, link, declare) {\n  var moduleObj = link.moduleObj;\n  var importerSetters = load.importerSetters;\n\n  var definedExports = false;\n\n  // closure especially not based on link to allow link record disposal\n  var declared = declare.call(global, function (name, value) {\n    if (typeof name === 'object') {\n      var changed = false;\n      for (var p in name) {\n        value = name[p];\n        if (p !== '__useDefault' && (!(p in moduleObj) || moduleObj[p] !== value)) {\n          changed = true;\n          moduleObj[p] = value;\n        }\n      }\n      if (changed === false)\n        return value;\n    }\n    else {\n      if ((definedExports || name in moduleObj) && moduleObj[name] === value)\n        return value;\n      moduleObj[name] = value;\n    }\n\n    for (var i = 0; i < importerSetters.length; i++)\n      importerSetters[i](moduleObj);\n\n    return value;\n  }, new ContextualLoader(loader, load.key));\n\n  link.setters = declared.setters;\n  link.execute = declared.execute;\n  if (declared.exports) {\n    link.moduleObj = moduleObj = declared.exports;\n    definedExports = true;\n  }\n}\n\nfunction instantiateDeps (loader, load, link, registry, state) {\n  if (link.depsInstantiatePromise)\n    return link.depsInstantiatePromise;\n\n  var depsInstantiatePromises = Array(link.dependencies.length);\n\n  for (var i = 0; i < link.dependencies.length; i++)\n    depsInstantiatePromises[i] = resolveInstantiateDep(loader, link.dependencies[i], load.key, registry, state, loader.trace && link.depMap || (link.depMap = {}));\n\n  var depsInstantiatePromise = Promise.all(depsInstantiatePromises)\n  .then(function (dependencyInstantiations) {\n    link.dependencyInstantiations = dependencyInstantiations;\n\n    // run setters to set up bindings to instantiated dependencies\n    if (link.setters) {\n      for (var i = 0; i < dependencyInstantiations.length; i++) {\n        var setter = link.setters[i];\n        if (setter) {\n          var instantiation = dependencyInstantiations[i];\n\n          if (instantiation instanceof ModuleNamespace) {\n            setter(instantiation);\n          }\n          else {\n            if (instantiation.loadError)\n              throw instantiation.loadError;\n            setter(instantiation.module || instantiation.linkRecord.moduleObj);\n            // this applies to both es and dynamic registrations\n            if (instantiation.importerSetters)\n              instantiation.importerSetters.push(setter);\n          }\n        }\n      }\n    }\n\n    return load;\n  });\n\n  if (loader.trace)\n    depsInstantiatePromise = depsInstantiatePromise.then(function () {\n      traceLoad(loader, load, link);\n      return load;\n    });\n\n  depsInstantiatePromise = depsInstantiatePromise.catch(function (err) {\n    // throw up the instantiateDeps stack\n    link.depsInstantiatePromise = undefined;\n    throw addToError(err, 'Loading ' + load.key);\n  });\n\n  depsInstantiatePromise.catch(function () {});\n\n  return link.depsInstantiatePromise = depsInstantiatePromise;\n}\n\nfunction deepInstantiateDeps (loader, load, link, registry, state) {\n  return new Promise(function (resolve, reject) {\n    var seen = [];\n    var loadCnt = 0;\n    function queueLoad (load) {\n      var link = load.linkRecord;\n      if (!link)\n        return;\n\n      if (seen.indexOf(load) !== -1)\n        return;\n      seen.push(load);\n\n      loadCnt++;\n      instantiateDeps(loader, load, link, registry, state)\n      .then(processLoad, reject);\n    }\n    function processLoad (load) {\n      loadCnt--;\n      var link = load.linkRecord;\n      if (link) {\n        for (var i = 0; i < link.dependencies.length; i++) {\n          var depLoad = link.dependencyInstantiations[i];\n          if (!(depLoad instanceof ModuleNamespace))\n            queueLoad(depLoad);\n        }\n      }\n      if (loadCnt === 0)\n        resolve();\n    }\n    queueLoad(load);\n  });\n}\n\n/*\n * System.register\n */\nRegisterLoader.prototype.register = function (key, deps, declare) {\n  var state = this[REGISTER_INTERNAL];\n\n  // anonymous modules get stored as lastAnon\n  if (declare === undefined) {\n    state.lastRegister = [key, deps, undefined];\n  }\n\n  // everything else registers into the register cache\n  else {\n    var load = state.records[key] || createLoadRecord(state, key, undefined);\n    load.registration = [deps, declare, undefined];\n  }\n};\n\n/*\n * System.registerDyanmic\n */\nRegisterLoader.prototype.registerDynamic = function (key, deps, executingRequire, execute) {\n  var state = this[REGISTER_INTERNAL];\n\n  // anonymous modules get stored as lastAnon\n  if (typeof key !== 'string') {\n    state.lastRegister = [key, deps, executingRequire];\n  }\n\n  // everything else registers into the register cache\n  else {\n    var load = state.records[key] || createLoadRecord(state, key, undefined);\n    load.registration = [deps, executingRequire, execute];\n  }\n};\n\n// ContextualLoader class\n// backwards-compatible with previous System.register context argument by exposing .id, .key\nfunction ContextualLoader (loader, key) {\n  this.loader = loader;\n  this.key = this.id = key;\n  this.meta = {\n    url: key\n    // scriptElement: null\n  };\n}\n/*ContextualLoader.prototype.constructor = function () {\n  throw new TypeError('Cannot subclass the contextual loader only Reflect.Loader.');\n};*/\nContextualLoader.prototype.import = function (key) {\n  if (this.loader.trace)\n    this.loader.loads[this.key].dynamicDeps.push(key);\n  return this.loader.import(key, this.key);\n};\n/*ContextualLoader.prototype.resolve = function (key) {\n  return this.loader.resolve(key, this.key);\n};*/\n\n// this is the execution function bound to the Module namespace record\nfunction ensureEvaluate (loader, load, link, registry, state, seen) {\n  if (load.module)\n    return load.module;\n\n  if (load.evalError)\n    throw load.evalError;\n\n  if (seen && seen.indexOf(load) !== -1)\n    return load.linkRecord.moduleObj;\n\n  // for ES loads we always run ensureEvaluate on top-level, so empty seen is passed regardless\n  // for dynamic loads, we pass seen if also dynamic\n  var err = doEvaluate(loader, load, link, registry, state, link.setters ? [] : seen || []);\n  if (err)\n    throw err;\n\n  return load.module;\n}\n\nfunction makeDynamicRequire (loader, key, dependencies, dependencyInstantiations, registry, state, seen) {\n  // we can only require from already-known dependencies\n  return function (name) {\n    for (var i = 0; i < dependencies.length; i++) {\n      if (dependencies[i] === name) {\n        var depLoad = dependencyInstantiations[i];\n        var module;\n\n        if (depLoad instanceof ModuleNamespace)\n          module = depLoad;\n        else\n          module = ensureEvaluate(loader, depLoad, depLoad.linkRecord, registry, state, seen);\n\n        return '__useDefault' in module ? module.__useDefault : module;\n      }\n    }\n    throw new Error('Module ' + name + ' not declared as a System.registerDynamic dependency of ' + key);\n  };\n}\n\n// ensures the given es load is evaluated\n// returns the error if any\nfunction doEvaluate (loader, load, link, registry, state, seen) {\n  seen.push(load);\n\n  var err;\n\n  // es modules evaluate dependencies first\n  // non es modules explicitly call moduleEvaluate through require\n  if (link.setters) {\n    var depLoad, depLink;\n    for (var i = 0; i < link.dependencies.length; i++) {\n      depLoad = link.dependencyInstantiations[i];\n\n      if (depLoad instanceof ModuleNamespace)\n        continue;\n\n      // custom Module returned from instantiate\n      depLink = depLoad.linkRecord;\n      if (depLink && seen.indexOf(depLoad) === -1) {\n        if (depLoad.evalError)\n          err = depLoad.evalError;\n        else\n          // dynamic / declarative boundaries clear the \"seen\" list\n          // we just let cross format circular throw as would happen in real implementations\n          err = doEvaluate(loader, depLoad, depLink, registry, state, depLink.setters ? seen : []);\n      }\n\n      if (err) {\n        load.linkRecord = undefined;\n        load.evalError = addToError(err, 'Evaluating ' + load.key);\n        return load.evalError;\n      }\n    }\n  }\n\n  // link.execute won't exist for Module returns from instantiate on top-level load\n  if (link.execute) {\n    // ES System.register execute\n    // \"this\" is null in ES\n    if (link.setters) {\n      err = declarativeExecute(link.execute);\n    }\n    // System.registerDynamic execute\n    // \"this\" is \"exports\" in CJS\n    else {\n      var module = { id: load.key };\n      var moduleObj = link.moduleObj;\n      Object.defineProperty(module, 'exports', {\n        configurable: true,\n        set: function (exports) {\n          moduleObj.default = moduleObj.__useDefault = exports;\n        },\n        get: function () {\n          return moduleObj.__useDefault;\n        }\n      });\n\n      var require = makeDynamicRequire(loader, load.key, link.dependencies, link.dependencyInstantiations, registry, state, seen);\n\n      // evaluate deps first\n      if (!link.executingRequire)\n        for (var i = 0; i < link.dependencies.length; i++)\n          require(link.dependencies[i]);\n\n      err = dynamicExecute(link.execute, require, moduleObj.default, module);\n\n      // pick up defineProperty calls to module.exports when we can\n      if (module.exports !== moduleObj.default)\n        moduleObj.default = moduleObj.__useDefault = module.exports;\n\n      var moduleDefault = moduleObj.default;\n\n      // __esModule flag extension support via lifting\n      if (moduleDefault && moduleDefault.__esModule) {\n        for (var p in moduleDefault) {\n          if (Object.hasOwnProperty.call(moduleDefault, p))\n            moduleObj[p] = moduleDefault[p];\n        }\n      }\n    }\n  }\n\n  // dispose link record\n  load.linkRecord = undefined;\n\n  if (err)\n    return load.evalError = addToError(err, 'Evaluating ' + load.key);\n\n  registry[load.key] = load.module = new ModuleNamespace(link.moduleObj);\n\n  // if not an esm module, run importer setters and clear them\n  // this allows dynamic modules to update themselves into es modules\n  // as soon as execution has completed\n  if (!link.setters) {\n    if (load.importerSetters)\n      for (var i = 0; i < load.importerSetters.length; i++)\n        load.importerSetters[i](load.module);\n    load.importerSetters = undefined;\n  }\n}\n\n// {} is the closest we can get to call(undefined)\nvar nullContext = {};\nif (Object.freeze)\n  Object.freeze(nullContext);\n\nfunction declarativeExecute (execute) {\n  try {\n    execute.call(nullContext);\n  }\n  catch (e) {\n    return e;\n  }\n}\n\nfunction dynamicExecute (execute, require, exports, module) {\n  try {\n    var output = execute.call(global, require, exports, module);\n    if (output !== undefined)\n      module.exports = output;\n  }\n  catch (e) {\n    return e;\n  }\n}\n","import { resolveIfNotPlain } from 'es-module-loader/core/resolve.js';\nimport { baseURI, isBrowser, isWindows, addToError, global, createSymbol } from 'es-module-loader/core/common.js';\nimport RegisterLoader from 'es-module-loader/core/register-loader.js';\nimport { ModuleNamespace } from 'es-module-loader/core/loader-polyfill.js';\n\nexport { baseURI, isBrowser, isWindows, addToError, global, resolveIfNotPlain, ModuleNamespace }\n\nexport var resolvedPromise = Promise.resolve();\nexport function noop () {};\n\nexport var emptyModule = new ModuleNamespace({});\n\nexport function protectedCreateNamespace (bindings) {\n  if (bindings instanceof ModuleNamespace)\n    return bindings;\n\n  if (bindings && bindings.__esModule)\n    return new ModuleNamespace(bindings);\n\n  return new ModuleNamespace({ default: bindings, __useDefault: bindings });\n}\n\nvar hasStringTag;\nexport function isModule (m) {\n  if (hasStringTag === undefined)\n    hasStringTag = typeof Symbol !== 'undefined' && !!Symbol.toStringTag;\n  return m instanceof ModuleNamespace || hasStringTag && Object.prototype.toString.call(m) == '[object Module]';\n}\n\nexport var CONFIG = createSymbol('loader-config');\nexport var METADATA = createSymbol('metadata');\nexport var PLAIN_RESOLVE = createSymbol('plain-resolve');\nexport var PLAIN_RESOLVE_SYNC = createSymbol('plain-resolve-sync');\n\nexport var isWorker = typeof window === 'undefined' && typeof self !== 'undefined' && typeof importScripts !== 'undefined';\n\nexport function warn (msg, force) {\n  if (force || this.warnings && typeof console !== 'undefined' && console.warn)\n    console.warn(msg);\n}\n\nexport function checkInstantiateWasm (loader, wasmBuffer, processAnonRegister) {\n  var bytes = new Uint8Array(wasmBuffer);\n\n  // detect by leading bytes\n  // Can be (new Uint32Array(fetched))[0] === 0x6D736100 when working in Node\n  if (bytes[0] === 0 && bytes[1] === 97 && bytes[2] === 115) {\n    return WebAssembly.compile(wasmBuffer).then(function (m) {\n      var deps = [];\n      var setters = [];\n      var importObj = {};\n\n      // we can only set imports if supported (eg Safari doesnt support)\n      if (WebAssembly.Module.imports)\n        WebAssembly.Module.imports(m).forEach(function (i) {\n          var key = i.module;\n          setters.push(function (m) {\n            importObj[key] = m;\n          });\n          if (deps.indexOf(key) === -1)\n            deps.push(key);\n        });\n      loader.register(deps, function (_export) {\n        return {\n          setters: setters,\n          execute: function () {\n            _export(new WebAssembly.Instance(m, importObj).exports);\n          }\n        };\n      });\n      processAnonRegister();\n\n      return true;\n    });\n  }\n\n  return Promise.resolve(false);\n}\n\nvar parentModuleContext;\nexport function loadNodeModule (key, baseURL) {\n  if (key[0] === '.')\n    throw new Error('Node module ' + key + ' can\\'t be loaded as it is not a package require.');\n\n  if (!parentModuleContext) {\n    var Module = this._nodeRequire('module');\n    var base = decodeURI(baseURL.substr(isWindows ? 8 : 7));\n    parentModuleContext = new Module(base);\n    parentModuleContext.paths = Module._nodeModulePaths(base);\n  }\n  return parentModuleContext.require(key);\n}\n\nexport function extend (a, b) {\n  for (var p in b) {\n    if (!Object.hasOwnProperty.call(b, p))\n      continue;\n    a[p] = b[p];\n  }\n  return a;\n}\n\nexport function prepend (a, b) {\n  for (var p in b) {\n    if (!Object.hasOwnProperty.call(b, p))\n      continue;\n    if (a[p] === undefined)\n      a[p] = b[p];\n  }\n  return a;\n}\n\n// meta first-level extends where:\n// array + array appends\n// object + object extends\n// other properties replace\nexport function extendMeta (a, b, _prepend) {\n  for (var p in b) {\n    if (!Object.hasOwnProperty.call(b, p))\n      continue;\n    var val = b[p];\n    if (a[p] === undefined)\n      a[p] = val;\n    else if (val instanceof Array && a[p] instanceof Array)\n      a[p] = [].concat(_prepend ? val : a[p]).concat(_prepend ? a[p] : val);\n    else if (typeof val == 'object' && val !== null && typeof a[p] == 'object')\n      a[p] = (_prepend ? prepend : extend)(extend({}, a[p]), val);\n    else if (!_prepend)\n      a[p] = val;\n  }\n}\n\nvar supportsPreload = false, supportsPrefetch = false;\nif (isBrowser)\n  (function () {\n    var relList = document.createElement('link').relList;\n    if (relList && relList.supports) {\n      supportsPrefetch = true;\n      try {\n        supportsPreload = relList.supports('preload');\n      }\n      catch (e) {}\n    }\n  })();\n\nexport function preloadScript (url) {\n  // fallback to old fashioned image technique which still works in safari\n  if (!supportsPreload && !supportsPrefetch) {\n    var preloadImage = new Image();\n    preloadImage.src = url;\n    return;\n  }\n\n  var link = document.createElement('link');\n  if (supportsPreload) {\n    link.rel = 'preload';\n    link.as = 'script';\n  }\n  else {\n    // this works for all except Safari (detected by relList.supports lacking)\n    link.rel = 'prefetch';\n  }\n  link.href = url;\n  document.head.appendChild(link);\n  document.head.removeChild(link);\n}\n\nfunction workerImport (src, resolve, reject) {\n  try {\n    importScripts(src);\n  }\n  catch (e) {\n    reject(e);\n  }\n  resolve();\n}\n\nif (isBrowser) {\n  var loadingScripts = [];\n  var onerror = window.onerror;\n  window.onerror = function globalOnerror (msg, src) {\n    for (var i = 0; i < loadingScripts.length; i++) {\n      if (loadingScripts[i].src !== src)\n        continue;\n      loadingScripts[i].err(msg);\n      return;\n    }\n    if (onerror)\n      onerror.apply(this, arguments);\n  };\n}\n\nexport function scriptLoad (src, crossOrigin, integrity, resolve, reject) {\n  // percent encode just \"#\" for HTTP requests\n  src = src.replace(/#/g, '%23');\n\n  // subresource integrity is not supported in web workers\n  if (isWorker)\n    return workerImport(src, resolve, reject);\n\n  var script = document.createElement('script');\n  script.type = 'text/javascript';\n  script.charset = 'utf-8';\n  script.async = true;\n\n  if (crossOrigin)\n    script.crossOrigin = crossOrigin;\n  if (integrity)\n    script.integrity = integrity;\n\n  script.addEventListener('load', load, false);\n  script.addEventListener('error', error, false);\n\n  script.src = src;\n  document.head.appendChild(script);\n\n  function load () {\n    resolve();\n    cleanup();\n  }\n\n  // note this does not catch execution errors\n  function error (err) {\n    cleanup();\n    reject(new Error('Fetching ' + src));\n  }\n\n  function cleanup () {\n    for (var i = 0; i < loadingScripts.length; i++) {\n      if (loadingScripts[i].err === error) {\n        loadingScripts.splice(i, 1);\n        break;\n      }\n    }\n    script.removeEventListener('load', load, false);\n    script.removeEventListener('error', error, false);\n    document.head.removeChild(script);\n  }\n}\n\nexport function readMemberExpression (p, value) {\n  var pParts = p.split('.');\n  while (pParts.length)\n    value = value[pParts.shift()];\n  return value;\n}\n\n// separate out paths cache as a baseURL lock process\nexport function applyPaths (baseURL, paths, key) {\n  var mapMatch = getMapMatch(paths, key);\n  if (mapMatch) {\n    var target = paths[mapMatch] + key.substr(mapMatch.length);\n\n    var resolved = resolveIfNotPlain(target, baseURI);\n    if (resolved !== undefined)\n      return resolved;\n\n    return baseURL + target;\n  }\n  else if (key.indexOf(':') !== -1) {\n    return key;\n  }\n  else {\n    return baseURL + key;\n  }\n}\n\nfunction checkMap (p) {\n  var name = this.name;\n  // can add ':' here if we want paths to match the behaviour of map\n  if (name.substr(0, p.length) === p && (name.length === p.length || name[p.length] === '/' || p[p.length - 1] === '/' || p[p.length - 1] === ':')) {\n    var curLen = p.split('/').length;\n    if (curLen > this.len) {\n      this.match = p;\n      this.len = curLen;\n    }\n  }\n}\n\nexport function getMapMatch (map, name) {\n  if (Object.hasOwnProperty.call(map, name))\n    return name;\n\n  var bestMatch = {\n    name: name,\n    match: undefined,\n    len: 0\n  };\n\n  Object.keys(map).forEach(checkMap, bestMatch);\n\n  return bestMatch.match;\n}\n\n// RegEx adjusted from https://github.com/jbrantly/yabble/blob/master/lib/yabble.js#L339\nexport var cjsRequireRegEx = /(?:^\\uFEFF?|[^$_a-zA-Z\\xA0-\\uFFFF.\"'])require\\s*\\(\\s*(\"[^\"\\\\]*(?:\\\\.[^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\.[^'\\\\]*)*')\\s*\\)/g;\n","import { isWindows } from './common.js';\n\n/*\n * Source loading\n */\nfunction fetchFetch (url, authorization, integrity, asBuffer) {\n  // fetch doesn't support file:/// urls\n  if (url.substr(0, 8) === 'file:///') {\n    if (hasXhr)\n      return xhrFetch(url, authorization, integrity, asBuffer);\n    else\n      throw new Error('Unable to fetch file URLs in this environment.');\n  }\n\n  // percent encode just \"#\" for HTTP requests\n  url = url.replace(/#/g, '%23');\n\n  var opts = {\n    // NB deprecate\n    headers: { Accept: 'application/x-es-module, */*' }\n  };\n\n  if (integrity)\n    opts.integrity = integrity;\n\n  if (authorization) {\n    if (typeof authorization == 'string')\n      opts.headers['Authorization'] = authorization;\n    opts.credentials = 'include';\n  } else {\n    opts.credentials = 'same-origin';\n  }\n\n  return fetch(url, opts)\n  .then(function(res) {\n    if (res.ok)\n      return asBuffer ? res.arrayBuffer() : res.text();\n    else\n      throw new Error('Fetch error: ' + res.status + ' ' + res.statusText);\n  });\n}\n\nfunction xhrFetch (url, authorization, integrity, asBuffer) {\n  return new Promise(function (resolve, reject) {\n    // percent encode just \"#\" for HTTP requests\n    url = url.replace(/#/g, '%23');\n\n    var xhr = new XMLHttpRequest();\n    if (asBuffer)\n      xhr.responseType = 'arraybuffer';\n    function load() {\n      resolve(asBuffer ? xhr.response : xhr.responseText);\n    }\n    function error() {\n      reject(new Error('XHR error: ' + (xhr.status ? ' (' + xhr.status + (xhr.statusText ? ' ' + xhr.statusText  : '') + ')' : '') + ' loading ' + url));\n    }\n\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState === 4) {\n        // in Chrome on file:/// URLs, status is 0\n        if (xhr.status == 0) {\n          if (xhr.response) {\n            load();\n          }\n          else {\n            // when responseText is empty, wait for load or error event\n            // to inform if it is a 404 or empty file\n            xhr.addEventListener('error', error);\n            xhr.addEventListener('load', load);\n          }\n        }\n        else if (xhr.status === 200) {\n          load();\n        }\n        else {\n          error();\n        }\n      }\n    };\n    xhr.open(\"GET\", url, true);\n\n    if (xhr.setRequestHeader) {\n      xhr.setRequestHeader('Accept', 'application/x-es-module, */*');\n      // can set \"authorization: true\" to enable withCredentials only\n      if (authorization) {\n        if (typeof authorization == 'string')\n          xhr.setRequestHeader('Authorization', authorization);\n        xhr.withCredentials = true;\n      }\n    }\n\n    xhr.send(null);\n  });\n}\n\nvar fs;\nfunction nodeFetch (url, authorization, integrity, asBuffer) {\n  if (url.substr(0, 8) != 'file:///')\n    return Promise.reject(new Error('Unable to fetch \"' + url + '\". Only file URLs of the form file:/// supported running in Node.'));\n\n  fs = fs || require('fs');\n  if (isWindows)\n    url = url.replace(/\\//g, '\\\\').substr(8);\n  else\n    url = url.substr(7);\n\n  return new Promise(function (resolve, reject) {\n    fs.readFile(url, function(err, data) {\n      if (err) {\n        return reject(err);\n      }\n      else {\n        if (asBuffer) {\n          resolve(data);\n        }\n        else {\n          // Strip Byte Order Mark out if it's the leading char\n          var dataString = data + '';\n          if (dataString[0] === '\\ufeff')\n            dataString = dataString.substr(1);\n\n          resolve(dataString);\n        }\n      }\n    });\n  });\n}\n\nfunction noFetch () {\n  throw new Error('No fetch method is defined for this environment.');\n}\n\nvar fetchFunction;\n\nvar hasXhr = typeof XMLHttpRequest !== 'undefined';\n\nif (typeof self !== 'undefined' && typeof self.fetch !== 'undefined')\n fetchFunction = fetchFetch;\nelse if (hasXhr)\n  fetchFunction = xhrFetch;\nelse if (typeof require !== 'undefined' && typeof process !== 'undefined')\n  fetchFunction = nodeFetch;\nelse\n  fetchFunction = noFetch;\n\nexport default fetchFunction;\n","import RegisterLoader from 'es-module-loader/core/register-loader.js';\nimport { getMapMatch, readMemberExpression, extendMeta, addToError, resolveIfNotPlain,\n    baseURI, CONFIG, METADATA, applyPaths, resolvedPromise, getPackage } from './common.js';\nimport { setPkgConfig, createPackage } from './config.js';\nimport fetch from './fetch.js';\n\nexport function createMetadata () {\n  return {\n    pluginKey: undefined,\n    pluginArgument: undefined,\n    pluginModule: undefined,\n    packageKey: undefined,\n    packageConfig: undefined,\n    load: undefined\n  };\n}\n\nfunction getCoreParentMetadata (loader, config, parentKey) {\n  var parentMetadata = createMetadata();\n\n  if (parentKey) {\n    // detect parent plugin\n    // we just need pluginKey to be truthy for package configurations\n    // so we duplicate it as pluginArgument - although not correct its not used\n    var parentPluginIndex;\n    if (config.pluginFirst) {\n      if ((parentPluginIndex = parentKey.lastIndexOf('!')) !== -1)\n        parentMetadata.pluginArgument = parentMetadata.pluginKey = parentKey.substr(0, parentPluginIndex);\n    }\n    else {\n      if ((parentPluginIndex = parentKey.indexOf('!')) !== -1)\n        parentMetadata.pluginArgument = parentMetadata.pluginKey = parentKey.substr(parentPluginIndex + 1);\n    }\n  }\n\n  return parentMetadata;\n}\n\nfunction getParentMetadata (loader, config, parentKey) {\n  var parentMetadata = createMetadata();\n\n  if (parentKey) {\n    // detect parent plugin\n    // we just need pluginKey to be truthy for package configurations\n    // so we duplicate it as pluginArgument - although not correct its not used\n    var parentPluginIndex;\n    if (config.pluginFirst) {\n      if ((parentPluginIndex = parentKey.lastIndexOf('!')) !== -1)\n        parentMetadata.pluginArgument = parentMetadata.pluginKey = parentKey.substr(0, parentPluginIndex);\n    }\n    else {\n      if ((parentPluginIndex = parentKey.indexOf('!')) !== -1)\n        parentMetadata.pluginArgument = parentMetadata.pluginKey = parentKey.substr(parentPluginIndex + 1);\n    }\n\n    // detect parent package\n    parentMetadata.packageKey = getMapMatch(config.packages, parentKey);\n    if (parentMetadata.packageKey)\n      parentMetadata.packageConfig = config.packages[parentMetadata.packageKey];\n  }\n\n  return parentMetadata;\n}\n\nexport function normalize (key, parentKey) {\n  var config = this[CONFIG];\n\n  var metadata = createMetadata();\n  var parentMetadata = getParentMetadata(this, config, parentKey);\n\n  var loader = this;\n\n  return Promise.resolve()\n\n  // boolean conditional\n  .then(function () {\n    // first we normalize the conditional\n    var booleanIndex = key.lastIndexOf('#?');\n\n    if (booleanIndex === -1)\n      return Promise.resolve(key);\n\n    var conditionObj = parseCondition.call(loader, key.substr(booleanIndex + 2));\n\n    // in builds, return normalized conditional\n    /*if (this.builder)\n      return this.resolve(conditionObj.module, parentKey)\n      .then(function (conditionModule) {\n        conditionObj.module = conditionModule;\n        return key.substr(0, booleanIndex) + '#?' + serializeCondition(conditionObj);\n      });*/\n\n    return resolveCondition.call(loader, conditionObj, parentKey, true)\n    .then(function (conditionValue) {\n      return conditionValue ? key.substr(0, booleanIndex) : '@empty';\n    });\n  })\n\n  // plugin\n  .then(function (key) {\n    var parsed = parsePlugin(config.pluginFirst, key);\n\n    if (!parsed)\n      return packageResolve.call(loader, config, key, parentMetadata && parentMetadata.pluginArgument || parentKey, metadata, parentMetadata, false);\n\n    metadata.pluginKey = parsed.plugin;\n\n    return Promise.all([\n      packageResolve.call(loader, config, parsed.argument, parentMetadata && parentMetadata.pluginArgument || parentKey, metadata, parentMetadata, true),\n      loader.resolve(parsed.plugin, parentKey)\n    ])\n    .then(function (normalized) {\n      metadata.pluginArgument = normalized[0];\n      metadata.pluginKey = normalized[1];\n\n      // don't allow a plugin to load itself\n      if (metadata.pluginArgument === metadata.pluginKey)\n        throw new Error('Plugin ' + metadata.pluginArgument + ' cannot load itself, make sure it is excluded from any wildcard meta configuration via a custom loader: false rule.');\n\n      return combinePluginParts(config.pluginFirst, normalized[0], normalized[1]);\n    });\n  })\n  .then(function (normalized) {\n    return interpolateConditional.call(loader, normalized, parentKey, parentMetadata);\n  })\n  .then(function (normalized) {\n    setMeta.call(loader, config, normalized, metadata);\n\n    if (metadata.pluginKey || !metadata.load.loader)\n      return normalized;\n\n    // loader by configuration\n    // normalizes to parent to support package loaders\n    return loader.resolve(metadata.load.loader, normalized)\n    .then(function (pluginKey) {\n      metadata.pluginKey = pluginKey;\n      metadata.pluginArgument = normalized;\n      return normalized;\n    });\n  })\n  .then(function (normalized) {\n    loader[METADATA][normalized] = metadata;\n    return normalized;\n  });\n}\n\n// normalization function used for registry keys\n// just does coreResolve without map\nexport function decanonicalize (config, key) {\n  var parsed = parsePlugin(config.pluginFirst, key);\n\n  // plugin\n  if (parsed) {\n    var pluginKey = decanonicalize.call(this, config, parsed.plugin);\n    return combinePluginParts(config.pluginFirst, coreResolve.call(this, config, parsed.argument, undefined, false, false), pluginKey);\n  }\n\n  return coreResolve.call(this, config, key, undefined, false, false);\n}\n\nexport function normalizeSync (key, parentKey) {\n  var config = this[CONFIG];\n\n  // normalizeSync is metadataless, so create metadata\n  var metadata = createMetadata();\n  var parentMetadata = parentMetadata || getParentMetadata(this, config, parentKey);\n\n  var parsed = parsePlugin(config.pluginFirst, key);\n\n  // plugin\n  if (parsed) {\n    metadata.pluginKey = normalizeSync.call(this, parsed.plugin, parentKey);\n    return combinePluginParts(config.pluginFirst,\n        packageResolveSync.call(this, config, parsed.argument, parentMetadata.pluginArgument || parentKey, metadata, parentMetadata, !!metadata.pluginKey),\n        metadata.pluginKey);\n  }\n\n  return packageResolveSync.call(this, config, key, parentMetadata.pluginArgument || parentKey, metadata, parentMetadata, !!metadata.pluginKey);\n}\n\nexport function coreResolve (config, key, parentKey, doMap, packageName) {\n  var relativeResolved = resolveIfNotPlain(key, parentKey || baseURI);\n\n  // standard URL resolution\n  if (relativeResolved)\n    return applyPaths(config.baseURL, config.paths, relativeResolved);\n\n  // plain keys not starting with './', 'x://' and '/' go through custom resolution\n  if (doMap) {\n    var mapMatch = getMapMatch(config.map, key);\n\n    if (mapMatch) {\n      key = config.map[mapMatch] + key.substr(mapMatch.length);\n\n      relativeResolved = resolveIfNotPlain(key, baseURI);\n      if (relativeResolved)\n        return applyPaths(config.baseURL, config.paths, relativeResolved);\n    }\n  }\n\n  if (this.registry.has(key))\n    return key;\n\n  if (key.substr(0, 6) === '@node/')\n    return key;\n\n  var trailingSlash = packageName && key[key.length - 1] !== '/';\n  var resolved = applyPaths(config.baseURL, config.paths, trailingSlash ? key + '/' : key);\n  if (trailingSlash)\n    return resolved.substr(0, resolved.length - 1);\n  return resolved;\n}\n\nfunction packageResolveSync (config, key, parentKey, metadata, parentMetadata, skipExtensions) {\n  // ignore . since internal maps handled by standard package resolution\n  if (parentMetadata && parentMetadata.packageConfig && key[0] !== '.') {\n    var parentMap = parentMetadata.packageConfig.map;\n    var parentMapMatch = parentMap && getMapMatch(parentMap, key);\n\n    if (parentMapMatch && typeof parentMap[parentMapMatch] === 'string') {\n      var mapped = doMapSync(this, config, parentMetadata.packageConfig, parentMetadata.packageKey, parentMapMatch, key, metadata, skipExtensions);\n      if (mapped)\n        return mapped;\n    }\n  }\n\n  var normalized = coreResolve.call(this, config, key, parentKey, true, true);\n\n  var pkgConfigMatch = getPackageConfigMatch(config, normalized);\n  metadata.packageKey = pkgConfigMatch && pkgConfigMatch.packageKey || getMapMatch(config.packages, normalized);\n\n  if (!metadata.packageKey)\n    return normalized;\n\n  if (config.packageConfigKeys.indexOf(normalized) !== -1) {\n    metadata.packageKey = undefined;\n    return normalized;\n  }\n\n  metadata.packageConfig = config.packages[metadata.packageKey] || (config.packages[metadata.packageKey] = createPackage());\n\n  var subPath = normalized.substr(metadata.packageKey.length + 1);\n\n  return applyPackageConfigSync(this, config, metadata.packageConfig, metadata.packageKey, subPath, metadata, skipExtensions);\n}\n\nfunction packageResolve (config, key, parentKey, metadata, parentMetadata, skipExtensions) {\n  var loader = this;\n\n  return resolvedPromise\n  .then(function () {\n    // ignore . since internal maps handled by standard package resolution\n    if (parentMetadata && parentMetadata.packageConfig && key.substr(0, 2) !== './') {\n      var parentMap = parentMetadata.packageConfig.map;\n      var parentMapMatch = parentMap && getMapMatch(parentMap, key);\n\n      if (parentMapMatch)\n        return doMap(loader, config, parentMetadata.packageConfig, parentMetadata.packageKey, parentMapMatch, key, metadata, skipExtensions);\n    }\n\n    return resolvedPromise;\n  })\n  .then(function (mapped) {\n    if (mapped)\n      return mapped;\n\n    // apply map, core, paths, contextual package map\n    var normalized = coreResolve.call(loader, config, key, parentKey, true, true);\n\n    var pkgConfigMatch = getPackageConfigMatch(config, normalized);\n    metadata.packageKey = pkgConfigMatch && pkgConfigMatch.packageKey || getMapMatch(config.packages, normalized);\n\n    if (!metadata.packageKey)\n      return Promise.resolve(normalized);\n\n    if (config.packageConfigKeys.indexOf(normalized) !== -1) {\n      metadata.packageKey = undefined;\n      metadata.load = createMeta();\n      metadata.load.format = 'json';\n      // ensure no loader\n      metadata.load.loader = '';\n      return Promise.resolve(normalized);\n    }\n\n    metadata.packageConfig = config.packages[metadata.packageKey] || (config.packages[metadata.packageKey] = createPackage());\n\n    // load configuration when it matches packageConfigPaths, not already configured, and not the config itself\n    var loadConfig = pkgConfigMatch && !metadata.packageConfig.configured;\n\n    return (loadConfig ? loadPackageConfigPath(loader, config, pkgConfigMatch.configPath, metadata) : resolvedPromise)\n    .then(function () {\n      var subPath = normalized.substr(metadata.packageKey.length + 1);\n\n      return applyPackageConfig(loader, config, metadata.packageConfig, metadata.packageKey, subPath, metadata, skipExtensions);\n    });\n  });\n}\n\nfunction createMeta () {\n  return {\n    extension: '',\n    deps: undefined,\n    format: undefined,\n    loader: undefined,\n    scriptLoad: undefined,\n    globals: undefined,\n    nonce: undefined,\n    integrity: undefined,\n    sourceMap: undefined,\n    exports: undefined,\n    encapsulateGlobal: false,\n    crossOrigin: undefined,\n    cjsRequireDetection: true,\n    cjsDeferDepsExecute: false,\n    esModule: false\n  };\n}\n\nfunction setMeta (config, key, metadata) {\n  metadata.load = metadata.load || createMeta();\n\n  // apply wildcard metas\n  var bestDepth = 0;\n  var wildcardIndex;\n  for (var module in config.meta) {\n    wildcardIndex = module.indexOf('*');\n    if (wildcardIndex === -1)\n      continue;\n    if (module.substr(0, wildcardIndex) === key.substr(0, wildcardIndex)\n        && module.substr(wildcardIndex + 1) === key.substr(key.length - module.length + wildcardIndex + 1)) {\n      var depth = module.split('/').length;\n      if (depth > bestDepth)\n        bestDepth = depth;\n      extendMeta(metadata.load, config.meta[module], bestDepth !== depth);\n    }\n  }\n\n  // apply exact meta\n  if (config.meta[key])\n    extendMeta(metadata.load, config.meta[key], false);\n\n  // apply package meta\n  if (metadata.packageKey) {\n    var subPath = key.substr(metadata.packageKey.length + 1);\n\n    var meta = {};\n    if (metadata.packageConfig.meta) {\n      var bestDepth = 0;\n      getMetaMatches(metadata.packageConfig.meta, subPath, function (metaPattern, matchMeta, matchDepth) {\n        if (matchDepth > bestDepth)\n          bestDepth = matchDepth;\n        extendMeta(meta, matchMeta, matchDepth && bestDepth > matchDepth);\n      });\n\n      extendMeta(metadata.load, meta, false);\n    }\n\n    // format\n    if (metadata.packageConfig.format && !metadata.pluginKey && !metadata.load.loader)\n      metadata.load.format = metadata.load.format || metadata.packageConfig.format;\n  }\n}\n\nfunction parsePlugin (pluginFirst, key) {\n  var argumentKey;\n  var pluginKey;\n\n  var pluginIndex = pluginFirst ? key.indexOf('!') : key.lastIndexOf('!');\n\n  if (pluginIndex === -1)\n    return;\n\n  if (pluginFirst) {\n    argumentKey = key.substr(pluginIndex + 1);\n    pluginKey = key.substr(0, pluginIndex);\n  }\n  else {\n    argumentKey = key.substr(0, pluginIndex);\n    pluginKey = key.substr(pluginIndex + 1) || argumentKey.substr(argumentKey.lastIndexOf('.') + 1);\n  }\n\n  return {\n    argument: argumentKey,\n    plugin: pluginKey\n  };\n}\n\n// put key back together after parts have been normalized\nfunction combinePluginParts (pluginFirst, argumentKey, pluginKey) {\n  if (pluginFirst)\n    return pluginKey + '!' + argumentKey;\n  else\n    return argumentKey + '!' + pluginKey;\n}\n\n/*\n * Package Configuration Extension\n *\n * Example:\n *\n * SystemJS.packages = {\n *   jquery: {\n *     main: 'index.js', // when not set, package key is requested directly\n *     format: 'amd',\n *     defaultExtension: 'ts', // defaults to 'js', can be set to false\n *     modules: {\n *       '*.ts': {\n *         loader: 'typescript'\n *       },\n *       'vendor/sizzle.js': {\n *         format: 'global'\n *       }\n *     },\n *     map: {\n *        // map internal require('sizzle') to local require('./vendor/sizzle')\n *        sizzle: './vendor/sizzle.js',\n *        // map any internal or external require of 'jquery/vendor/another' to 'another/index.js'\n *        './vendor/another.js': './another/index.js',\n *        // test.js / test -> lib/test.js\n *        './test.js': './lib/test.js',\n *\n *        // environment-specific map configurations\n *        './index.js': {\n *          '~browser': './index-node.js',\n *          './custom-condition.js|~export': './index-custom.js'\n *        }\n *     },\n *     // allows for setting package-prefixed depCache\n *     // keys are normalized module keys relative to the package itself\n *     depCache: {\n *       // import 'package/index.js' loads in parallel package/lib/test.js,package/vendor/sizzle.js\n *       './index.js': ['./test'],\n *       './test.js': ['external-dep'],\n *       'external-dep/path.js': ['./another.js']\n *     }\n *   }\n * };\n *\n * Then:\n *   import 'jquery'                       -> jquery/index.js\n *   import 'jquery/submodule'             -> jquery/submodule.js\n *   import 'jquery/submodule.ts'          -> jquery/submodule.ts loaded as typescript\n *   import 'jquery/vendor/another'        -> another/index.js\n *\n * Detailed Behaviours\n * - main can have a leading \"./\" can be added optionally\n * - map and defaultExtension are applied to the main\n * - defaultExtension adds the extension only if the exact extension is not present\n\n * - if a meta value is available for a module, map and defaultExtension are skipped\n * - like global map, package map also applies to subpaths (sizzle/x, ./vendor/another/sub)\n * - condition module map is '@env' module in package or '@system-env' globally\n * - map targets support conditional interpolation ('./x': './x.#{|env}.js')\n * - internal package map targets cannot use boolean conditionals\n *\n * Package Configuration Loading\n *\n * Not all packages may already have their configuration present in the System config\n * For these cases, a list of packageConfigPaths can be provided, which when matched against\n * a request, will first request a \".json\" file by the package key to derive the package\n * configuration from. This allows dynamic loading of non-predetermined code, a key use\n * case in SystemJS.\n *\n * Example:\n *\n *   SystemJS.packageConfigPaths = ['packages/test/package.json', 'packages/*.json'];\n *\n *   // will first request 'packages/new-package/package.json' for the package config\n *   // before completing the package request to 'packages/new-package/path'\n *   SystemJS.import('packages/new-package/path');\n *\n *   // will first request 'packages/test/package.json' before the main\n *   SystemJS.import('packages/test');\n *\n * When a package matches packageConfigPaths, it will always send a config request for\n * the package configuration.\n * The package key itself is taken to be the match up to and including the last wildcard\n * or trailing slash.\n * The most specific package config path will be used.\n * Any existing package configurations for the package will deeply merge with the\n * package config, with the existing package configurations taking preference.\n * To opt-out of the package configuration request for a package that matches\n * packageConfigPaths, use the { configured: true } package config option.\n *\n */\n\nfunction addDefaultExtension (config, pkg, pkgKey, subPath, skipExtensions) {\n  // don't apply extensions to folders or if defaultExtension = false\n  if (!subPath || !pkg.defaultExtension || subPath[subPath.length - 1] === '/' || skipExtensions)\n    return subPath;\n\n  var metaMatch = false;\n\n  // exact meta or meta with any content after the last wildcard skips extension\n  if (pkg.meta)\n    getMetaMatches(pkg.meta, subPath, function (metaPattern, matchMeta, matchDepth) {\n      if (matchDepth === 0 || metaPattern.lastIndexOf('*') !== metaPattern.length - 1)\n        return metaMatch = true;\n    });\n\n  // exact global meta or meta with any content after the last wildcard skips extension\n  if (!metaMatch && config.meta)\n    getMetaMatches(config.meta, pkgKey + '/' + subPath, function (metaPattern, matchMeta, matchDepth) {\n      if (matchDepth === 0 || metaPattern.lastIndexOf('*') !== metaPattern.length - 1)\n        return metaMatch = true;\n    });\n\n  if (metaMatch)\n    return subPath;\n\n  // work out what the defaultExtension is and add if not there already\n  var defaultExtension = '.' + pkg.defaultExtension;\n  if (subPath.substr(subPath.length - defaultExtension.length) !== defaultExtension)\n    return subPath + defaultExtension;\n  else\n    return subPath;\n}\n\nfunction applyPackageConfigSync (loader, config, pkg, pkgKey, subPath, metadata, skipExtensions) {\n  // main\n  if (!subPath) {\n    if (pkg.main)\n      subPath = pkg.main.substr(0, 2) === './' ? pkg.main.substr(2) : pkg.main;\n    else\n      // also no submap if key is package itself (import 'pkg' -> 'path/to/pkg.js')\n      // NB can add a default package main convention here\n      // if it becomes internal to the package then it would no longer be an exit path\n      return pkgKey;\n  }\n\n  // map config checking without then with extensions\n  if (pkg.map) {\n    var mapPath = './' + subPath;\n\n    var mapMatch = getMapMatch(pkg.map, mapPath);\n\n    // we then check map with the default extension adding\n    if (!mapMatch) {\n      mapPath = './' + addDefaultExtension(config, pkg, pkgKey, subPath, skipExtensions);\n      if (mapPath !== './' + subPath)\n        mapMatch = getMapMatch(pkg.map, mapPath);\n    }\n    if (mapMatch) {\n      var mapped = doMapSync(loader, config, pkg, pkgKey, mapMatch, mapPath, metadata, skipExtensions);\n      if (mapped)\n        return mapped;\n    }\n  }\n\n  // normal package resolution\n  return pkgKey + '/' + addDefaultExtension(config, pkg, pkgKey, subPath, skipExtensions);\n}\n\nfunction validMapping (mapMatch, mapped, path) {\n  // allow internal ./x -> ./x/y or ./x/ -> ./x/y recursive maps\n  // but only if the path is exactly ./x and not ./x/z\n  if (mapped.substr(0, mapMatch.length) === mapMatch && path.length > mapMatch.length)\n    return false;\n\n  return true;\n}\n\nfunction doMapSync (loader, config, pkg, pkgKey, mapMatch, path, metadata, skipExtensions) {\n  if (path[path.length - 1] === '/')\n    path = path.substr(0, path.length - 1);\n  var mapped = pkg.map[mapMatch];\n\n  if (typeof mapped === 'object')\n    throw new Error('Synchronous conditional normalization not supported sync normalizing ' + mapMatch + ' in ' + pkgKey);\n\n  if (!validMapping(mapMatch, mapped, path) || typeof mapped !== 'string')\n    return;\n\n  return packageResolveSync.call(loader, config, mapped + path.substr(mapMatch.length), pkgKey + '/', metadata, metadata, skipExtensions);\n}\n\nfunction applyPackageConfig (loader, config, pkg, pkgKey, subPath, metadata, skipExtensions) {\n  // main\n  if (!subPath) {\n    if (pkg.main)\n      subPath = pkg.main.substr(0, 2) === './' ? pkg.main.substr(2) : pkg.main;\n    // also no submap if key is package itself (import 'pkg' -> 'path/to/pkg.js')\n    else\n      // NB can add a default package main convention here\n      // if it becomes internal to the package then it would no longer be an exit path\n      return Promise.resolve(pkgKey);\n  }\n\n  // map config checking without then with extensions\n  var mapPath, mapMatch;\n\n  if (pkg.map) {\n    mapPath = './' + subPath;\n    mapMatch = getMapMatch(pkg.map, mapPath);\n\n    // we then check map with the default extension adding\n    if (!mapMatch) {\n      mapPath = './' + addDefaultExtension(config, pkg, pkgKey, subPath, skipExtensions);\n      if (mapPath !== './' + subPath)\n        mapMatch = getMapMatch(pkg.map, mapPath);\n    }\n  }\n\n  return (mapMatch ? doMap(loader, config, pkg, pkgKey, mapMatch, mapPath, metadata, skipExtensions) : resolvedPromise)\n  .then(function (mapped) {\n    if (mapped)\n      return Promise.resolve(mapped);\n\n    // normal package resolution / fallback resolution for no conditional match\n    return Promise.resolve(pkgKey + '/' + addDefaultExtension(config, pkg, pkgKey, subPath, skipExtensions));\n  });\n}\n\nfunction doMap (loader, config, pkg, pkgKey, mapMatch, path, metadata, skipExtensions) {\n  if (path[path.length - 1] === '/')\n    path = path.substr(0, path.length - 1);\n\n  var mapped = pkg.map[mapMatch];\n\n  if (typeof mapped === 'string') {\n    if (!validMapping(mapMatch, mapped, path))\n      return resolvedPromise;\n    return packageResolve.call(loader, config, mapped + path.substr(mapMatch.length), pkgKey + '/', metadata, metadata, skipExtensions)\n    .then(function (normalized) {\n      return interpolateConditional.call(loader, normalized, pkgKey + '/', metadata);\n    });\n  }\n\n  // we use a special conditional syntax to allow the builder to handle conditional branch points further\n  /*if (loader.builder)\n    return Promise.resolve(pkgKey + '/#:' + path);*/\n\n  // we load all conditions upfront\n  var conditionPromises = [];\n  var conditions = [];\n  for (var e in mapped) {\n    var c = parseCondition(e);\n    conditions.push({\n      condition: c,\n      map: mapped[e]\n    });\n    conditionPromises.push(RegisterLoader.prototype.import.call(loader, c.module, pkgKey));\n  }\n\n  // map object -> conditional map\n  return Promise.all(conditionPromises)\n  .then(function (conditionValues) {\n    // first map condition to match is used\n    for (var i = 0; i < conditions.length; i++) {\n      var c = conditions[i].condition;\n      var value = readMemberExpression(c.prop, '__useDefault' in conditionValues[i] ? conditionValues[i].__useDefault : conditionValues[i]);\n      if (!c.negate && value || c.negate && !value)\n        return conditions[i].map;\n    }\n  })\n  .then(function (mapped) {\n    if (mapped) {\n      if (!validMapping(mapMatch, mapped, path))\n        return resolvedPromise;\n      return packageResolve.call(loader, config, mapped + path.substr(mapMatch.length), pkgKey + '/', metadata, metadata, skipExtensions)\n      .then(function (normalized) {\n        return interpolateConditional.call(loader, normalized, pkgKey + '/', metadata);\n      });\n    }\n\n    // no environment match -> fallback to original subPath by returning undefined\n  });\n}\n\n// check if the given normalized key matches a packageConfigPath\n// if so, loads the config\nvar packageConfigPaths = {};\n\n// data object for quick checks against package paths\nfunction createPkgConfigPathObj (path) {\n  var lastWildcard = path.lastIndexOf('*');\n  var length = Math.max(lastWildcard + 1, path.lastIndexOf('/'));\n  return {\n    length: length,\n    regEx: new RegExp('^(' + path.substr(0, length).replace(/[.+?^${}()|[\\]\\\\]/g, '\\\\$&').replace(/\\*/g, '[^\\\\/]+') + ')(\\\\/|$)'),\n    wildcard: lastWildcard !== -1\n  };\n}\n\n// most specific match wins\nfunction getPackageConfigMatch (config, normalized) {\n  var pkgKey, exactMatch = false, configPath;\n  for (var i = 0; i < config.packageConfigPaths.length; i++) {\n    var packageConfigPath = config.packageConfigPaths[i];\n    var p = packageConfigPaths[packageConfigPath] || (packageConfigPaths[packageConfigPath] = createPkgConfigPathObj(packageConfigPath));\n    if (normalized.length < p.length)\n      continue;\n    var match = normalized.match(p.regEx);\n    if (match && (!pkgKey || (!(exactMatch && p.wildcard) && pkgKey.length < match[1].length))) {\n      pkgKey = match[1];\n      exactMatch = !p.wildcard;\n      configPath = pkgKey + packageConfigPath.substr(p.length);\n    }\n  }\n\n  if (!pkgKey)\n    return;\n\n  return {\n    packageKey: pkgKey,\n    configPath: configPath\n  };\n}\n\nfunction loadPackageConfigPath (loader, config, pkgConfigPath, metadata, normalized) {\n  var configLoader = loader.pluginLoader || loader;\n\n  // ensure we note this is a package config file path\n  // it will then be skipped from getting other normalizations itself to ensure idempotency\n  if (config.packageConfigKeys.indexOf(pkgConfigPath) === -1)\n    config.packageConfigKeys.push(pkgConfigPath);\n\n  return configLoader.import(pkgConfigPath)\n  .then(function (pkgConfig) {\n    setPkgConfig(metadata.packageConfig, pkgConfig, metadata.packageKey, true, config);\n    metadata.packageConfig.configured = true;\n  })\n  .catch(function (err) {\n    throw addToError(err, 'Unable to fetch package configuration file ' + pkgConfigPath);\n  });\n}\n\nfunction getMetaMatches (pkgMeta, subPath, matchFn) {\n  // wildcard meta\n  var wildcardIndex;\n  for (var module in pkgMeta) {\n    // allow meta to start with ./ for flexibility\n    var dotRel = module.substr(0, 2) === './' ? './' : '';\n    if (dotRel)\n      module = module.substr(2);\n\n    wildcardIndex = module.indexOf('*');\n    if (wildcardIndex === -1)\n      continue;\n\n    if (module.substr(0, wildcardIndex) === subPath.substr(0, wildcardIndex)\n        && module.substr(wildcardIndex + 1) === subPath.substr(subPath.length - module.length + wildcardIndex + 1)) {\n      // alow match function to return true for an exit path\n      if (matchFn(module, pkgMeta[dotRel + module], module.split('/').length))\n        return;\n    }\n  }\n  // exact meta\n  var exactMeta = pkgMeta[subPath] && Object.hasOwnProperty.call(pkgMeta, subPath) ? pkgMeta[subPath] : pkgMeta['./' + subPath];\n  if (exactMeta)\n    matchFn(exactMeta, exactMeta, 0);\n}\n\n\n/*\n * Conditions Extension\n *\n *   Allows a condition module to alter the resolution of an import via syntax:\n *\n *     import $ from 'jquery/#{browser}';\n *\n *   Will first load the module 'browser' via `SystemJS.import('browser')` and\n *   take the default export of that module.\n *   If the default export is not a string, an error is thrown.\n *\n *   We then substitute the string into the require to get the conditional resolution\n *   enabling environment-specific variations like:\n *\n *     import $ from 'jquery/ie'\n *     import $ from 'jquery/firefox'\n *     import $ from 'jquery/chrome'\n *     import $ from 'jquery/safari'\n *\n *   It can be useful for a condition module to define multiple conditions.\n *   This can be done via the `|` modifier to specify an export member expression:\n *\n *     import 'jquery/#{./browser.js|grade.version}'\n *\n *   Where the `grade` export `version` member in the `browser.js` module  is substituted.\n *\n *\n * Boolean Conditionals\n *\n *   For polyfill modules, that are used as imports but have no module value,\n *   a binary conditional allows a module not to be loaded at all if not needed:\n *\n *     import 'es5-shim#?./conditions.js|needs-es5shim'\n *\n *   These conditions can also be negated via:\n *\n *     import 'es5-shim#?./conditions.js|~es6'\n *\n */\n\nvar sysConditions = ['browser', 'node', 'dev', 'build', 'production', 'default'];\n\nfunction parseCondition (condition) {\n  var conditionExport, conditionModule, negation;\n\n  var negation;\n  var conditionExportIndex = condition.lastIndexOf('|');\n  if (conditionExportIndex !== -1) {\n    conditionExport = condition.substr(conditionExportIndex + 1);\n    conditionModule = condition.substr(0, conditionExportIndex);\n\n    if (conditionExport[0] === '~') {\n      negation = true;\n      conditionExport = conditionExport.substr(1);\n    }\n  }\n  else {\n    negation = condition[0] === '~';\n    conditionExport = 'default';\n    conditionModule = condition.substr(negation);\n    if (sysConditions.indexOf(conditionModule) !== -1) {\n      conditionExport = conditionModule;\n      conditionModule = null;\n    }\n  }\n\n  return {\n    module: conditionModule || '@system-env',\n    prop: conditionExport,\n    negate: negation\n  };\n}\n\nfunction resolveCondition (conditionObj, parentKey, bool) {\n  // import without __useDefault handling here\n  return RegisterLoader.prototype.import.call(this, conditionObj.module, parentKey)\n  .then(function (condition) {\n    var m = readMemberExpression(conditionObj.prop, condition);\n\n    if (bool && typeof m !== 'boolean')\n      throw new TypeError('Condition did not resolve to a boolean.');\n\n    return conditionObj.negate ? !m : m;\n  });\n}\n\nvar interpolationRegEx = /#\\{[^\\}]+\\}/;\nfunction interpolateConditional (key, parentKey, parentMetadata) {\n  // first we normalize the conditional\n  var conditionalMatch = key.match(interpolationRegEx);\n\n  if (!conditionalMatch)\n    return Promise.resolve(key);\n\n  var conditionObj = parseCondition.call(this, conditionalMatch[0].substr(2, conditionalMatch[0].length - 3));\n\n  // in builds, return normalized conditional\n  /*if (this.builder)\n    return this.normalize(conditionObj.module, parentKey, createMetadata(), parentMetadata)\n    .then(function (conditionModule) {\n      conditionObj.module = conditionModule;\n      return key.replace(interpolationRegEx, '#{' + serializeCondition(conditionObj) + '}');\n    });*/\n\n  return resolveCondition.call(this, conditionObj, parentKey, false)\n  .then(function (conditionValue) {\n    if (typeof conditionValue !== 'string')\n      throw new TypeError('The condition value for ' + key + ' doesn\\'t resolve to a string.');\n\n    if (conditionValue.indexOf('/') !== -1)\n      throw new TypeError('Unabled to interpolate conditional ' + key + (parentKey ? ' in ' + parentKey : '') + '\\n\\tThe condition value ' + conditionValue + ' cannot contain a \"/\" separator.');\n\n    return key.replace(interpolationRegEx, conditionValue);\n  });\n}\n","import { envModule, setProduction, configNames } from './systemjs-loader.js';\nimport { extend, prepend, warn, resolveIfNotPlain, baseURI, CONFIG } from './common.js';\nimport { coreResolve } from './resolve.js';\n\n/*\n Extend config merging one deep only\n\n  loader.config({\n    some: 'random',\n    config: 'here',\n    deep: {\n      config: { too: 'too' }\n    }\n  });\n\n  <=>\n\n  loader.some = 'random';\n  loader.config = 'here'\n  loader.deep = loader.deep || {};\n  loader.deep.config = { too: 'too' };\n\n\n  Normalizes meta and package configs allowing for:\n\n  SystemJS.config({\n    meta: {\n      './index.js': {}\n    }\n  });\n\n  To become\n\n  SystemJS.meta['https://thissite.com/index.js'] = {};\n\n  For easy normalization canonicalization with latest URL support.\n\n*/\nvar envConfigNames = ['browserConfig', 'nodeConfig', 'devConfig', 'buildConfig', 'productionConfig'];\nfunction envSet(loader, cfg, envCallback) {\n  for (var i = 0; i < envConfigNames.length; i++) {\n    var envConfig = envConfigNames[i];\n    if (cfg[envConfig] && envModule[envConfig.substr(0, envConfig.length - 6)])\n      envCallback(cfg[envConfig]);\n  }\n}\n\nfunction cloneObj (obj, maxDepth) {\n  var clone = {};\n  for (var p in obj) {\n    var prop = obj[p];\n    if (maxDepth > 1) {\n      if (prop instanceof Array)\n        clone[p] = [].concat(prop);\n      else if (typeof prop === 'object')\n        clone[p] = cloneObj(prop, maxDepth - 1);\n      else if (p !== 'packageConfig')\n        clone[p] = prop;\n    }\n    else {\n      clone[p] = prop;\n    }\n  }\n  return clone;\n}\n\nexport function getConfigItem (config, p) {\n  var cfgItem = config[p];\n\n  // getConfig must return an unmodifiable clone of the configuration\n  if (cfgItem instanceof Array)\n    return config[p].concat([]);\n  else if (typeof cfgItem === 'object')\n    return cloneObj(cfgItem, 3)\n  else\n    return config[p];\n}\n\nexport function getConfig (configName) {\n  if (configName) {\n    if (configNames.indexOf(configName) !== -1)\n      return getConfigItem(this[CONFIG], configName);\n    throw new Error('\"' + configName + '\" is not a valid configuration name. Must be one of ' + configNames.join(', ') + '.');\n  }\n\n  var cfg = {};\n  for (var i = 0; i < configNames.length; i++) {\n    var p = configNames[i];\n    var configItem = getConfigItem(this[CONFIG], p);\n    if (configItem !== undefined)\n      cfg[p] = configItem;\n  }\n  return cfg;\n}\n\nexport function setConfig (cfg, isEnvConfig) {\n  var loader = this;\n  var config = this[CONFIG];\n\n  if ('warnings' in cfg)\n    config.warnings = cfg.warnings;\n\n  if ('wasm' in cfg)\n    config.wasm = typeof WebAssembly !== 'undefined' && cfg.wasm;\n\n  if ('production' in cfg || 'build' in cfg)\n    setProduction.call(loader, !!cfg.production, !!(cfg.build || envModule && envModule.build));\n\n  if (!isEnvConfig) {\n    // if using nodeConfig / browserConfig / productionConfig, take baseURL from there\n    // these exceptions will be unnecessary when we can properly implement config queuings\n    var baseURL;\n    envSet(loader, cfg, function(cfg) {\n      baseURL = baseURL || cfg.baseURL;\n    });\n    baseURL = baseURL || cfg.baseURL;\n\n    // always configure baseURL first\n    if (baseURL) {\n      config.baseURL = resolveIfNotPlain(baseURL, baseURI) || resolveIfNotPlain('./' + baseURL, baseURI);\n      if (config.baseURL[config.baseURL.length - 1] !== '/')\n        config.baseURL += '/';\n    }\n\n    if (cfg.paths)\n      extend(config.paths, cfg.paths);\n\n    envSet(loader, cfg, function(cfg) {\n      if (cfg.paths)\n        extend(config.paths, cfg.paths);\n    });\n\n    for (var p in config.paths) {\n      if (config.paths[p].indexOf('*') === -1)\n        continue;\n      warn.call(config, 'Path config ' + p + ' -> ' + config.paths[p] + ' is no longer supported as wildcards are deprecated.');\n      delete config.paths[p];\n    }\n  }\n\n  if (cfg.defaultJSExtensions)\n    warn.call(config, 'The defaultJSExtensions configuration option is deprecated.\\n  Use packages defaultExtension instead.', true);\n\n  if (typeof cfg.pluginFirst === 'boolean')\n    config.pluginFirst = cfg.pluginFirst;\n\n  if (cfg.map) {\n    for (var p in cfg.map) {\n      var v = cfg.map[p];\n\n      if (typeof v === 'string') {\n        var mapped = coreResolve.call(loader, config, v, undefined, false, false);\n        if (mapped[mapped.length -1] === '/' && p[p.length - 1] !== ':' && p[p.length - 1] !== '/')\n          mapped = mapped.substr(0, mapped.length - 1);\n        config.map[p] = mapped;\n      }\n\n      // object map\n      else {\n        var pkgName = coreResolve.call(loader, config, p[p.length - 1] !== '/' ? p + '/' : p, undefined, true, true);\n        pkgName = pkgName.substr(0, pkgName.length - 1);\n\n        var pkg = config.packages[pkgName];\n        if (!pkg) {\n          pkg = config.packages[pkgName] = createPackage();\n          // use '' instead of false to keep type consistent\n          pkg.defaultExtension = '';\n        }\n        setPkgConfig(pkg, { map: v }, pkgName, false, config);\n      }\n    }\n  }\n\n  if (cfg.packageConfigPaths) {\n    var packageConfigPaths = [];\n    for (var i = 0; i < cfg.packageConfigPaths.length; i++) {\n      var path = cfg.packageConfigPaths[i];\n      var packageLength = Math.max(path.lastIndexOf('*') + 1, path.lastIndexOf('/'));\n      var normalized = coreResolve.call(loader, config, path.substr(0, packageLength), undefined, false, false);\n      packageConfigPaths[i] = normalized + path.substr(packageLength);\n    }\n    config.packageConfigPaths = packageConfigPaths;\n  }\n\n  if (cfg.bundles) {\n    for (var p in cfg.bundles) {\n      var bundle = [];\n      for (var i = 0; i < cfg.bundles[p].length; i++)\n        bundle.push(loader.normalizeSync(cfg.bundles[p][i]));\n      config.bundles[p] = bundle;\n    }\n  }\n\n  if (cfg.packages) {\n    for (var p in cfg.packages) {\n      if (p.match(/^([^\\/]+:)?\\/\\/$/))\n        throw new TypeError('\"' + p + '\" is not a valid package name.');\n\n      var pkgName = coreResolve.call(loader, config, p[p.length - 1] !== '/' ? p + '/' : p, undefined, true, true);\n      pkgName = pkgName.substr(0, pkgName.length - 1);\n\n      setPkgConfig(config.packages[pkgName] = config.packages[pkgName] || createPackage(), cfg.packages[p], pkgName, false, config);\n    }\n  }\n\n  if (cfg.depCache) {\n    for (var p in cfg.depCache)\n      config.depCache[loader.normalizeSync(p)] = [].concat(cfg.depCache[p]);\n  }\n\n  if (cfg.meta) {\n    for (var p in cfg.meta) {\n      // base wildcard stays base\n      if (p[0] === '*') {\n        extend(config.meta[p] = config.meta[p] || {}, cfg.meta[p]);\n      }\n      else {\n        var resolved = coreResolve.call(loader, config, p, undefined, true, true);\n        extend(config.meta[resolved] = config.meta[resolved] || {}, cfg.meta[p]);\n      }\n    }\n  }\n\n  if ('transpiler' in cfg)\n    config.transpiler = cfg.transpiler;\n\n\n  // copy any remaining non-standard configuration properties\n  for (var c in cfg) {\n    if (configNames.indexOf(c) !== -1)\n      continue;\n    if (envConfigNames.indexOf(c) !== -1)\n      continue;\n\n    // warn.call(config, 'Setting custom config option `System.config({ ' + c + ': ... })` is deprecated. Avoid custom config options or set SystemJS.' + c + ' = ... directly.');\n    loader[c] = cfg[c];\n  }\n\n  envSet(loader, cfg, function(cfg) {\n    loader.config(cfg, true);\n  });\n}\n\nexport function createPackage () {\n  return {\n    defaultExtension: undefined,\n    main: undefined,\n    format: undefined,\n    meta: undefined,\n    map: undefined,\n    packageConfig: undefined,\n    configured: false\n  };\n}\n\n// deeply-merge (to first level) config with any existing package config\nexport function setPkgConfig (pkg, cfg, pkgName, prependConfig, config) {\n  for (var prop in cfg) {\n    if (prop === 'main' || prop === 'format' || prop === 'defaultExtension' || prop === 'configured') {\n      if (!prependConfig || pkg[prop] === undefined)\n        pkg[prop] = cfg[prop];\n    }\n    else if (prop === 'map') {\n      (prependConfig ? prepend : extend)(pkg.map = pkg.map || {}, cfg.map);\n    }\n    else if (prop === 'meta') {\n      (prependConfig ? prepend : extend)(pkg.meta = pkg.meta || {}, cfg.meta);\n    }\n    else if (Object.hasOwnProperty.call(cfg, prop)) {\n      warn.call(config, '\"' + prop + '\" is not a valid package configuration option in package ' + pkgName);\n    }\n  }\n\n  // default defaultExtension for packages only\n  if (pkg.defaultExtension === undefined)\n    pkg.defaultExtension = 'js';\n\n  if (pkg.main === undefined && pkg.map && pkg.map['.']) {\n    pkg.main = pkg.map['.'];\n    delete pkg.map['.'];\n  }\n  // main object becomes main map\n  else if (typeof pkg.main === 'object') {\n    pkg.map = pkg.map || {};\n    pkg.map['./@main'] = pkg.main;\n    pkg.main['default'] = pkg.main['default'] || './';\n    pkg.main = '@main';\n  }\n\n  return pkg;\n}\n","import { isBrowser, global } from './common.js';\n\nvar hasBuffer = typeof Buffer !== 'undefined';\ntry {\n  if (hasBuffer && new Buffer('a').toString('base64') !== 'YQ==')\n    hasBuffer = false;\n}\ncatch (e) {\n  hasBuffer = false;\n}\n\nvar sourceMapPrefix = '\\n//# sourceMapping' + 'URL=data:application/json;base64,';\nfunction inlineSourceMap (sourceMapString) {\n  if (hasBuffer)\n    return sourceMapPrefix + new Buffer(sourceMapString).toString('base64');\n  else if (typeof btoa !== 'undefined')\n    return sourceMapPrefix + btoa(unescape(encodeURIComponent(sourceMapString)));\n  else\n    return '';\n}\n\nfunction getSource(source, sourceMap, address, wrap) {\n  var lastLineIndex = source.lastIndexOf('\\n');\n\n  if (sourceMap) {\n    if (typeof sourceMap != 'object')\n      throw new TypeError('load.metadata.sourceMap must be set to an object.');\n\n    sourceMap = JSON.stringify(sourceMap);\n  }\n\n  return (wrap ? '(function(System, SystemJS) {' : '') + source + (wrap ? '\\n})(System, System);' : '')\n      // adds the sourceURL comment if not already present\n      + (source.substr(lastLineIndex, 15) != '\\n//# sourceURL='\n        ? '\\n//# sourceURL=' + address + (sourceMap ? '!transpiled' : '') : '')\n      // add sourceMappingURL if load.metadata.sourceMap is set\n      + (sourceMap && inlineSourceMap(sourceMap) || '');\n}\n\n// script execution via injecting a script tag into the page\n// this allows CSP nonce to be set for CSP environments\nvar head;\nfunction scriptExec(loader, source, sourceMap, address, nonce) {\n  if (!head)\n    head = document.head || document.body || document.documentElement;\n\n  var script = document.createElement('script');\n  script.text = getSource(source, sourceMap, address, false);\n  var onerror = window.onerror;\n  var e;\n  window.onerror = function(_e) {\n    e = addToError(_e, 'Evaluating ' + address);\n    if (onerror)\n      onerror.apply(this, arguments);\n  }\n  preExec(loader);\n\n  if (nonce)\n    script.setAttribute('nonce', nonce);\n\n  head.appendChild(script);\n  head.removeChild(script);\n  postExec();\n  window.onerror = onerror;\n  if (e)\n    return e;\n}\n\nvar vm;\nvar useVm;\n\nvar curSystem;\n\nvar callCounter = 0;\nfunction preExec (loader) {\n  if (callCounter++ == 0)\n    curSystem = global.System;\n  global.System = global.SystemJS = loader;\n}\nfunction postExec () {\n  if (--callCounter == 0)\n    global.System = global.SystemJS = curSystem;\n}\n\nvar supportsScriptExec = false;\nif (isBrowser && typeof document != 'undefined' && document.getElementsByTagName) {\n  if (!(window.chrome && window.chrome.extension || navigator.userAgent.match(/^Node\\.js/)))\n    supportsScriptExec = true;\n}\n\nexport function evaluate (loader, source, sourceMap, address, integrity, nonce, noWrap) {\n  if (!source)\n    return;\n  if (nonce && supportsScriptExec)\n    return scriptExec(loader, source, sourceMap, address, nonce);\n  try {\n    preExec(loader);\n    // global scoped eval for node (avoids require scope leak)\n    if (!vm && loader._nodeRequire) {\n      vm = loader._nodeRequire('vm');\n      useVm = vm.runInThisContext(\"typeof System !== 'undefined' && System\") === loader;\n    }\n    if (useVm)\n      vm.runInThisContext(getSource(source, sourceMap, address, !noWrap), { filename: address + (sourceMap ? '!transpiled' : '') });\n    else\n      (0, eval)(getSource(source, sourceMap, address, !noWrap));\n    postExec();\n  }\n  catch (e) {\n    postExec();\n    return e;\n  }\n}\n","\nimport { isWindows, global, readMemberExpression, cjsRequireRegEx, noop } from './common.js';\n\nexport default function (loader) {\n  loader.set('@@cjs-helpers', loader.newModule({\n    requireResolve: requireResolve.bind(loader),\n    getPathVars: getPathVars\n  }));\n\n  loader.set('@@global-helpers', loader.newModule({\n    prepareGlobal: prepareGlobal\n  }));\n\n  /*\n    AMD-compatible require\n    To copy RequireJS, set window.require = window.requirejs = loader.amdRequire\n  */\n  function require (names, callback, errback, referer) {\n    // in amd, first arg can be a config object... we just ignore\n    if (typeof names === 'object' && !(names instanceof Array))\n      return require.apply(null, Array.prototype.splice.call(arguments, 1, arguments.length - 1));\n\n    // amd require\n    if (typeof names === 'string' && typeof callback === 'function')\n      names = [names];\n    if (names instanceof Array) {\n      var dynamicRequires = [];\n      for (var i = 0; i < names.length; i++)\n        dynamicRequires.push(loader.import(names[i], referer));\n      Promise.all(dynamicRequires).then(function (modules) {\n        if (callback)\n          callback.apply(null, modules);\n      }, errback);\n    }\n\n    // commonjs require\n    else if (typeof names === 'string') {\n      var normalized = loader.decanonicalize(names, referer);\n      var module = loader.get(normalized);\n      if (!module)\n        throw new Error('Module not already loaded loading \"' + names + '\" as ' + normalized + (referer ? ' from \"' + referer + '\".' : '.'));\n      return '__useDefault' in module ? module.__useDefault : module;\n    }\n\n    else\n      throw new TypeError('Invalid require');\n  }\n\n  function define (name, deps, factory) {\n    if (typeof name !== 'string') {\n      factory = deps;\n      deps = name;\n      name = null;\n    }\n\n    if (!(deps instanceof Array)) {\n      factory = deps;\n      deps = ['require', 'exports', 'module'].splice(0, factory.length);\n    }\n\n    if (typeof factory !== 'function')\n      factory = (function (factory) {\n        return function() { return factory; }\n      })(factory);\n\n    if (!name) {\n      if (curMetaDeps) {\n        deps = deps.concat(curMetaDeps);\n        curMetaDeps = undefined;\n      }\n    }\n\n    // remove system dependencies\n    var requireIndex, exportsIndex, moduleIndex;\n\n    if ((requireIndex = deps.indexOf('require')) !== -1) {\n\n      deps.splice(requireIndex, 1);\n\n      // only trace cjs requires for non-named\n      // named defines assume the trace has already been done\n      if (!name)\n        deps = deps.concat(amdGetCJSDeps(factory.toString(), requireIndex));\n    }\n\n    if ((exportsIndex = deps.indexOf('exports')) !== -1)\n      deps.splice(exportsIndex, 1);\n\n    if ((moduleIndex = deps.indexOf('module')) !== -1)\n      deps.splice(moduleIndex, 1);\n\n    function execute (req, exports, module) {\n      var depValues = [];\n      for (var i = 0; i < deps.length; i++)\n        depValues.push(req(deps[i]));\n\n      module.uri = module.id;\n\n      module.config = noop;\n\n      // add back in system dependencies\n      if (moduleIndex !== -1)\n        depValues.splice(moduleIndex, 0, module);\n\n      if (exportsIndex !== -1)\n        depValues.splice(exportsIndex, 0, exports);\n\n      if (requireIndex !== -1) {\n        var contextualRequire = function (names, callback, errback) {\n          if (typeof names === 'string' && typeof callback !== 'function')\n            return req(names);\n          return require.call(loader, names, callback, errback, module.id);\n        };\n        contextualRequire.toUrl = function (name) {\n          return loader.normalizeSync(name, module.id);\n        };\n        depValues.splice(requireIndex, 0, contextualRequire);\n      }\n\n      // set global require to AMD require\n      var curRequire = global.require;\n      global.require = require;\n\n      var output = factory.apply(exportsIndex === -1 ? global : exports, depValues);\n\n      global.require = curRequire;\n\n      if (typeof output !== 'undefined')\n        module.exports = output;\n    }\n\n    // anonymous define\n    if (!name) {\n      loader.registerDynamic(deps, false, curEsModule ? wrapEsModuleExecute(execute) : execute);\n    }\n    else {\n      loader.registerDynamic(name, deps, false, execute);\n\n      // if we don't have any other defines,\n      // then let this be an anonymous define\n      // this is just to support single modules of the form:\n      // define('jquery')\n      // still loading anonymously\n      // because it is done widely enough to be useful\n      // as soon as there is more than one define, this gets removed though\n      if (lastNamedDefine) {\n        lastNamedDefine = undefined;\n        multipleNamedDefines = true;\n      }\n      else if (!multipleNamedDefines) {\n        lastNamedDefine = [deps, execute];\n      }\n    }\n  }\n  define.amd = {};\n\n  loader.amdDefine = define;\n  loader.amdRequire = require;\n}\n\n// CJS\nvar windowOrigin;\nif (typeof window !== 'undefined' && typeof document !== 'undefined' && window.location)\n  windowOrigin = location.protocol + '//' + location.hostname + (location.port ? ':' + location.port : '');\n\nfunction stripOrigin(path) {\n  if (path.substr(0, 8) === 'file:///')\n    return path.substr(7 + !!isWindows);\n\n  if (windowOrigin && path.substr(0, windowOrigin.length) === windowOrigin)\n    return path.substr(windowOrigin.length);\n\n  return path;\n}\n\nexport function requireResolve (request, parentId) {\n  return stripOrigin(this.normalizeSync(request, parentId));\n}\n\nexport function getPathVars (moduleId) {\n  // remove any plugin syntax\n  var pluginIndex = moduleId.lastIndexOf('!');\n  var filename;\n  if (pluginIndex !== -1)\n    filename = moduleId.substr(0, pluginIndex);\n  else\n    filename = moduleId;\n\n  var dirname = filename.split('/');\n  dirname.pop();\n  dirname = dirname.join('/');\n\n  return {\n    filename: stripOrigin(filename),\n    dirname: stripOrigin(dirname)\n  };\n}\n\nvar commentRegEx = /(^|[^\\\\])(\\/\\*([\\s\\S]*?)\\*\\/|([^:]|^)\\/\\/(.*)$)/mg;\nvar stringRegEx = /(\"[^\"\\\\\\n\\r]*(\\\\.[^\"\\\\\\n\\r]*)*\"|'[^'\\\\\\n\\r]*(\\\\.[^'\\\\\\n\\r]*)*')/g;\n\n// used to support leading #!/usr/bin/env in scripts as supported in Node\nvar hashBangRegEx = /^\\#\\!.*/;\n\n// extract CJS dependencies from source text via regex static analysis\n// read require('x') statements not in comments or strings\nexport function getCJSDeps (source) {\n  cjsRequireRegEx.lastIndex = commentRegEx.lastIndex = stringRegEx.lastIndex = 0;\n\n  var deps = [];\n\n  var match;\n\n  // track string and comment locations for unminified source\n  var stringLocations = [], commentLocations = [];\n\n  function inLocation (locations, match) {\n    for (var i = 0; i < locations.length; i++)\n      if (locations[i][0] < match.index && locations[i][1] > match.index)\n        return true;\n    return false;\n  }\n\n  if (source.length / source.split('\\n').length < 200) {\n    while (match = stringRegEx.exec(source))\n      stringLocations.push([match.index, match.index + match[0].length]);\n\n    // TODO: track template literals here before comments\n\n    while (match = commentRegEx.exec(source)) {\n      // only track comments not starting in strings\n      if (!inLocation(stringLocations, match))\n        commentLocations.push([match.index + match[1].length, match.index + match[0].length - 1]);\n    }\n  }\n\n  while (match = cjsRequireRegEx.exec(source)) {\n    // ensure we're not within a string or comment location\n    if (!inLocation(stringLocations, match) && !inLocation(commentLocations, match)) {\n      var dep = match[1].substr(1, match[1].length - 2);\n      // skip cases like require('\" + file + \"')\n      if (dep.match(/\"|'/))\n        continue;\n      deps.push(dep);\n    }\n  }\n\n  return deps;\n}\n\n// Global\n// bare minimum ignores\nvar ignoredGlobalProps = ['_g', 'sessionStorage', 'localStorage', 'clipboardData', 'frames', 'frameElement', 'external',\n  'mozAnimationStartTime', 'webkitStorageInfo', 'webkitIndexedDB', 'mozInnerScreenY', 'mozInnerScreenX'];\n\nvar globalSnapshot;\nfunction globalIterator (globalName) {\n  if (ignoredGlobalProps.indexOf(globalName) !== -1)\n    return;\n  try {\n    var value = global[globalName];\n  }\n  catch (e) {\n    ignoredGlobalProps.push(globalName);\n  }\n  this(globalName, value);\n}\n\nexport function getGlobalValue (exports) {\n  if (typeof exports === 'string')\n    return readMemberExpression(exports, global);\n\n  if (!(exports instanceof Array))\n    throw new Error('Global exports must be a string or array.');\n\n  var globalValue = {};\n  for (var i = 0; i < exports.length; i++)\n    globalValue[exports[i].split('.').pop()] = readMemberExpression(exports[i], global);\n  return globalValue;\n}\n\nexport function prepareGlobal (moduleName, exports, globals, encapsulate) {\n  // disable module detection\n  var curDefine = global.define;\n\n  global.define = undefined;\n\n  // set globals\n  var oldGlobals;\n  if (globals) {\n    oldGlobals = {};\n    for (var g in globals) {\n      oldGlobals[g] = global[g];\n      global[g] = globals[g];\n    }\n  }\n\n  // store a complete copy of the global object in order to detect changes\n  if (!exports) {\n    globalSnapshot = {};\n\n    Object.keys(global).forEach(globalIterator, function (name, value) {\n      globalSnapshot[name] = value;\n    });\n  }\n\n  // return function to retrieve global\n  return function () {\n    var globalValue = exports ? getGlobalValue(exports) : {};\n\n    var singleGlobal;\n    var multipleExports = !!exports;\n\n    if (!exports || encapsulate)\n      Object.keys(global).forEach(globalIterator, function (name, value) {\n        if (globalSnapshot[name] === value)\n          return;\n        if (value === undefined)\n          return;\n\n        // allow global encapsulation where globals are removed\n        if (encapsulate)\n          global[name] = undefined;\n\n        if (!exports) {\n          globalValue[name] = value;\n\n          if (singleGlobal !== undefined) {\n            if (!multipleExports && singleGlobal !== value)\n              multipleExports = true;\n          }\n          else {\n            singleGlobal = value;\n          }\n        }\n      });\n\n    globalValue = multipleExports ? globalValue : singleGlobal;\n\n    // revert globals\n    if (oldGlobals) {\n      for (var g in oldGlobals)\n        global[g] = oldGlobals[g];\n    }\n    global.define = curDefine;\n\n    return globalValue;\n  };\n}\n\n// AMD\nvar cjsRequirePre = \"(?:^|[^$_a-zA-Z\\\\xA0-\\\\uFFFF.])\";\nvar cjsRequirePost = \"\\\\s*\\\\(\\\\s*(\\\"([^\\\"]+)\\\"|'([^']+)')\\\\s*\\\\)\";\nvar fnBracketRegEx = /\\(([^\\)]*)\\)/;\nvar wsRegEx = /^\\s+|\\s+$/g;\n\nvar requireRegExs = {};\n\nfunction amdGetCJSDeps(source, requireIndex) {\n\n  // remove comments\n  source = source.replace(commentRegEx, '');\n\n  // determine the require alias\n  var params = source.match(fnBracketRegEx);\n  var requireAlias = (params[1].split(',')[requireIndex] || 'require').replace(wsRegEx, '');\n\n  // find or generate the regex for this requireAlias\n  var requireRegEx = requireRegExs[requireAlias] || (requireRegExs[requireAlias] = new RegExp(cjsRequirePre + requireAlias + cjsRequirePost, 'g'));\n\n  requireRegEx.lastIndex = 0;\n\n  var deps = [];\n\n  var match;\n  while (match = requireRegEx.exec(source))\n    deps.push(match[2] || match[3]);\n\n  return deps;\n}\n\nfunction wrapEsModuleExecute (execute) {\n  return function (require, exports, module) {\n    execute(require, exports, module);\n    exports = module.exports;\n    if ((typeof exports === 'object' || typeof exports === 'function') && !('__esModule' in exports))\n      Object.defineProperty(module.exports, '__esModule', {\n        value: true\n      });\n  };\n}\n\n// generate anonymous define from singular named define\nvar multipleNamedDefines = false;\nvar lastNamedDefine;\nvar curMetaDeps;\nvar curEsModule = false;\nexport function clearLastDefine (metaDeps, esModule) {\n  curMetaDeps = metaDeps;\n  curEsModule = esModule;\n  lastNamedDefine = undefined;\n  multipleNamedDefines = false;\n}\nexport function registerLastDefine (loader) {\n  if (lastNamedDefine)\n    loader.registerDynamic(curMetaDeps ? lastNamedDefine[0].concat(curMetaDeps) : lastNamedDefine[0],\n        false, curEsModule ? wrapEsModuleExecute(lastNamedDefine[1]) : lastNamedDefine[1]);\n\n  // bundles are an empty module\n  else if (multipleNamedDefines)\n    loader.registerDynamic([], false, noop);\n}\n","import { scriptLoad, isBrowser, isWorker, global, cjsRequireRegEx, addToError, loadNodeModule,\n    warn, CONFIG, METADATA, emptyModule, protectedCreateNamespace, resolvedPromise, preloadScript, checkInstantiateWasm } from './common.js';\nimport { evaluate } from './evaluate.js';\nimport fetch from './fetch.js';\nimport { getGlobalValue, getCJSDeps, requireResolve, getPathVars, prepareGlobal, clearLastDefine, registerLastDefine } from './format-helpers.js';\n\nvar supportsScriptLoad = (isBrowser || isWorker) && typeof navigator !== 'undefined' && navigator.userAgent && !navigator.userAgent.match(/MSIE (9|10).0/);\n\n// include the node require since we're overriding it\nexport var nodeRequire;\nif (typeof require !== 'undefined' && typeof process !== 'undefined' && !process.browser)\n  nodeRequire = require;\n\nfunction setMetaEsModule (metadata, moduleValue) {\n  if (metadata.load.esModule && (typeof moduleValue === 'object' || typeof moduleValue === 'function') &&\n      !('__esModule' in moduleValue))\n    Object.defineProperty(moduleValue, '__esModule', {\n      value: true\n    });\n}\n\nexport function instantiate (key, processAnonRegister) {\n  var loader = this;\n  var config = this[CONFIG];\n  // first do bundles and depCache\n  return (loadBundlesAndDepCache(config, this, key) || resolvedPromise)\n  .then(function () {\n    if (processAnonRegister())\n      return;\n\n    var metadata = loader[METADATA][key];\n\n    // node module loading\n    if (key.substr(0, 6) === '@node/') {\n      if (!loader._nodeRequire)\n        throw new TypeError('Error loading ' + key + '. Can only load node core modules in Node.');\n      loader.registerDynamic([], false, function () {\n        return loadNodeModule.call(loader, key.substr(6), loader.baseURL);\n      });\n      processAnonRegister();\n      return;\n    }\n\n    if (metadata.load.scriptLoad ) {\n      if (metadata.load.pluginKey || !supportsScriptLoad) {\n        metadata.load.scriptLoad = false;\n        warn.call(config, 'scriptLoad not supported for \"' + key + '\"');\n      }\n    }\n    else if (metadata.load.scriptLoad !== false && !metadata.load.pluginKey && supportsScriptLoad) {\n      // auto script load AMD, global without deps\n      if (!metadata.load.deps && !metadata.load.globals &&\n          (metadata.load.format === 'system' || metadata.load.format === 'register' || metadata.load.format === 'global' && metadata.load.exports))\n        metadata.load.scriptLoad = true;\n    }\n\n    // fetch / translate / instantiate pipeline\n    if (!metadata.load.scriptLoad)\n      return initializePlugin(loader, key, metadata)\n      .then(function () {\n        return runFetchPipeline(loader, key, metadata, processAnonRegister, config.wasm);\n      })\n\n    // just script loading\n    return new Promise(function (resolve, reject) {\n      if (metadata.load.format === 'amd' && global.define !== loader.amdDefine)\n        throw new Error('Loading AMD with scriptLoad requires setting the global `' + globalName + '.define = SystemJS.amdDefine`');\n\n      scriptLoad(key, metadata.load.crossOrigin, metadata.load.integrity, function () {\n        if (!processAnonRegister()) {\n          metadata.load.format = 'global';\n          var globalValue = metadata.load.exports && getGlobalValue(metadata.load.exports);\n          loader.registerDynamic([], false, function () {\n            setMetaEsModule(metadata, globalValue);\n            return globalValue;\n          });\n          processAnonRegister();\n        }\n\n        resolve();\n      }, reject);\n    });\n  })\n  .then(function (instantiated) {\n    delete loader[METADATA][key];\n    return instantiated;\n  });\n};\n\nfunction initializePlugin (loader, key, metadata) {\n  if (!metadata.pluginKey)\n    return resolvedPromise;\n\n  return loader.import(metadata.pluginKey).then(function (plugin) {\n    metadata.pluginModule = plugin;\n    metadata.pluginLoad = {\n      name: key,\n      address: metadata.pluginArgument,\n      source: undefined,\n      metadata: metadata.load\n    };\n    metadata.load.deps = metadata.load.deps || [];\n  });\n}\n\nfunction loadBundlesAndDepCache (config, loader, key) {\n  // load direct deps, in turn will pick up their trace trees\n  var deps = config.depCache[key];\n  if (deps) {\n    for (var i = 0; i < deps.length; i++)\n      loader.normalize(deps[i], key).then(preloadScript);\n  }\n  else {\n    var matched = false;\n    for (var b in config.bundles) {\n      for (var i = 0; i < config.bundles[b].length; i++) {\n        var curModule = config.bundles[b][i];\n\n        if (curModule === key) {\n          matched = true;\n          break;\n        }\n\n        // wildcard in bundles includes / boundaries\n        if (curModule.indexOf('*') !== -1) {\n          var parts = curModule.split('*');\n          if (parts.length !== 2) {\n            config.bundles[b].splice(i--, 1);\n            continue;\n          }\n\n          if (key.substr(0, parts[0].length) === parts[0] &&\n              key.substr(key.length - parts[1].length, parts[1].length) === parts[1]) {\n            matched = true;\n            break;\n          }\n        }\n      }\n\n      if (matched)\n        return loader.import(b);\n    }\n  }\n}\n\nfunction runFetchPipeline (loader, key, metadata, processAnonRegister, wasm) {\n  if (metadata.load.exports && !metadata.load.format)\n    metadata.load.format = 'global';\n\n  return resolvedPromise\n\n  // locate\n  .then(function () {\n    if (!metadata.pluginModule || !metadata.pluginModule.locate)\n      return;\n\n    return Promise.resolve(metadata.pluginModule.locate.call(loader, metadata.pluginLoad))\n    .then(function (address) {\n      if (address)\n        metadata.pluginLoad.address = address;\n    });\n  })\n\n  // fetch\n  .then(function () {\n    if (!metadata.pluginModule)\n      return fetch(key, metadata.load.authorization, metadata.load.integrity, wasm);\n\n    wasm = false;\n\n    if (!metadata.pluginModule.fetch)\n      return fetch(metadata.pluginLoad.address, metadata.load.authorization, metadata.load.integrity, false);\n\n    return metadata.pluginModule.fetch.call(loader, metadata.pluginLoad, function (load) {\n      return fetch(load.address, metadata.load.authorization, metadata.load.integrity, false);\n    });\n  })\n\n  .then(function (fetched) {\n    // fetch is already a utf-8 string if not doing wasm detection\n    if (!wasm || typeof fetched === 'string')\n      return translateAndInstantiate(loader, key, fetched, metadata, processAnonRegister);\n\n    return checkInstantiateWasm(loader, fetched, processAnonRegister)\n    .then(function (wasmInstantiated) {\n      if (wasmInstantiated)\n        return;\n\n      // not wasm -> convert buffer into utf-8 string to execute as a module\n      // TextDecoder compatibility matches WASM currently. Need to keep checking this.\n      // The TextDecoder interface is documented at http://encoding.spec.whatwg.org/#interface-textdecoder\n      var stringSource = isBrowser ? new TextDecoder('utf-8').decode(new Uint8Array(fetched)) : fetched.toString();\n      return translateAndInstantiate(loader, key, stringSource, metadata, processAnonRegister);\n    });\n  });\n}\n\nfunction translateAndInstantiate (loader, key, source, metadata, processAnonRegister) {\n  return Promise.resolve(source)\n  // translate\n  .then(function (source) {\n    if (metadata.load.format === 'detect')\n      metadata.load.format = undefined;\n\n    readMetaSyntax(source, metadata);\n\n    if (!metadata.pluginModule)\n      return source;\n\n    metadata.pluginLoad.source = source;\n\n    if (!metadata.pluginModule.translate)\n      return source;\n\n    return Promise.resolve(metadata.pluginModule.translate.call(loader, metadata.pluginLoad, metadata.traceOpts))\n    .then(function (translated) {\n      if (metadata.load.sourceMap) {\n        if (typeof metadata.load.sourceMap !== 'object')\n          throw new Error('metadata.load.sourceMap must be set to an object.');\n        sanitizeSourceMap(metadata.pluginLoad.address, metadata.load.sourceMap);\n      }\n\n      if (typeof translated === 'string')\n        return translated;\n      else\n        return metadata.pluginLoad.source;\n    });\n  })\n  .then(function (source) {\n    if (!metadata.load.format && source.substring(0, 8) === '\"bundle\"') {\n      metadata.load.format = 'system';\n      return source;\n    }\n\n    if (metadata.load.format === 'register' || !metadata.load.format && detectRegisterFormat(source)) {\n      metadata.load.format = 'register';\n      return source;\n    }\n\n    if (metadata.load.format !== 'esm' && (metadata.load.format || !source.match(esmRegEx))) {\n      return source;\n    }\n\n    metadata.load.format = 'esm';\n    return transpile(loader, source, key, metadata, processAnonRegister);\n  })\n\n  // instantiate\n  .then(function (translated) {\n    if (typeof translated !== 'string' || !metadata.pluginModule || !metadata.pluginModule.instantiate)\n      return translated;\n\n    var calledInstantiate = false;\n    metadata.pluginLoad.source = translated;\n    return Promise.resolve(metadata.pluginModule.instantiate.call(loader, metadata.pluginLoad, function (load) {\n      translated = load.source;\n      metadata.load = load.metadata;\n      if (calledInstantiate)\n        throw new Error('Instantiate must only be called once.');\n      calledInstantiate = true;\n    }))\n    .then(function (result) {\n      if (calledInstantiate)\n        return translated;\n      return protectedCreateNamespace(result);\n    });\n  })\n  .then(function (source) {\n    // plugin instantiate result case\n    if (typeof source !== 'string')\n      return source;\n\n    if (!metadata.load.format)\n      metadata.load.format = detectLegacyFormat(source);\n\n    var registered = false;\n\n    switch (metadata.load.format) {\n      case 'esm':\n      case 'register':\n      case 'system':\n        var err = evaluate(loader, source, metadata.load.sourceMap, key, metadata.load.integrity, metadata.load.nonce, false);\n        if (err)\n          throw err;\n        if (!processAnonRegister())\n          return emptyModule;\n        return;\n      break;\n\n      case 'json':\n        // warn.call(config, '\"json\" module format is deprecated.');\n        var parsed = JSON.parse(source);\n        return loader.newModule({ default: parsed, __useDefault: parsed });\n\n      case 'amd':\n        var curDefine = global.define;\n        global.define = loader.amdDefine;\n\n        clearLastDefine(metadata.load.deps, metadata.load.esModule);\n\n        var err = evaluate(loader, source, metadata.load.sourceMap, key, metadata.load.integrity, metadata.load.nonce, false);\n\n        // if didn't register anonymously, use the last named define if only one\n        registered = processAnonRegister();\n        if (!registered) {\n          registerLastDefine(loader);\n          registered = processAnonRegister();\n        }\n\n        global.define = curDefine;\n\n        if (err)\n          throw err;\n      break;\n\n      case 'cjs':\n        var metaDeps = metadata.load.deps;\n        var deps = (metadata.load.deps || []).concat(metadata.load.cjsRequireDetection ? getCJSDeps(source) : []);\n\n        for (var g in metadata.load.globals)\n          if (metadata.load.globals[g])\n            deps.push(metadata.load.globals[g]);\n\n        loader.registerDynamic(deps, true, function (require, exports, module) {\n          require.resolve = function (key) {\n            return requireResolve.call(loader, key, module.id);\n          };\n          // support module.paths ish\n          module.paths = [];\n          module.require = require;\n\n          // ensure meta deps execute first\n          if (!metadata.load.cjsDeferDepsExecute && metaDeps)\n            for (var i = 0; i < metaDeps.length; i++)\n              require(metaDeps[i]);\n\n          var pathVars = getPathVars(module.id);\n          var __cjsWrapper = {\n            exports: exports,\n            args: [require, exports, module, pathVars.filename, pathVars.dirname, global, global]\n          };\n\n          var cjsWrapper = \"(function (require, exports, module, __filename, __dirname, global, GLOBAL\";\n\n          // add metadata.globals to the wrapper arguments\n          if (metadata.load.globals)\n            for (var g in metadata.load.globals) {\n              __cjsWrapper.args.push(require(metadata.load.globals[g]));\n              cjsWrapper += \", \" + g;\n            }\n\n          // disable AMD detection\n          var define = global.define;\n          global.define = undefined;\n          global.__cjsWrapper = __cjsWrapper;\n\n          source = cjsWrapper + \") {\" + source.replace(hashBangRegEx, '') + \"\\n}).apply(__cjsWrapper.exports, __cjsWrapper.args);\";\n\n          var err = evaluate(loader, source, metadata.load.sourceMap, key, metadata.load.integrity, metadata.load.nonce, false);\n          if (err)\n            throw err;\n\n          setMetaEsModule(metadata, exports);\n\n          global.__cjsWrapper = undefined;\n          global.define = define;\n        });\n        registered = processAnonRegister();\n      break;\n\n      case 'global':\n        var deps = metadata.load.deps || [];\n        for (var g in metadata.load.globals) {\n          var gl = metadata.load.globals[g];\n          if (gl)\n            deps.push(gl);\n        }\n\n        loader.registerDynamic(deps, false, function (require, exports, module) {\n          var globals;\n          if (metadata.load.globals) {\n            globals = {};\n            for (var g in metadata.load.globals)\n              if (metadata.load.globals[g])\n                globals[g] = require(metadata.load.globals[g]);\n          }\n\n          var exportName = metadata.load.exports;\n\n          if (exportName)\n            source += '\\n' + globalName + '[\"' + exportName + '\"] = ' + exportName + ';';\n\n          var retrieveGlobal = prepareGlobal(module.id, exportName, globals, metadata.load.encapsulateGlobal);\n          var err = evaluate(loader, source, metadata.load.sourceMap, key, metadata.load.integrity, metadata.load.nonce, true);\n\n          if (err)\n            throw err;\n\n          var output = retrieveGlobal();\n          setMetaEsModule(metadata, output);\n          return output;\n        });\n        registered = processAnonRegister();\n      break;\n\n      default:\n        throw new TypeError('Unknown module format \"' + metadata.load.format + '\" for \"' + key + '\".' + (metadata.load.format === 'es6' ? ' Use \"esm\" instead here.' : ''));\n    }\n\n    if (!registered)\n      throw new Error('Module ' + key + ' detected as ' + metadata.load.format + ' but didn\\'t execute correctly.');\n  });\n}\n\nvar globalName = typeof self != 'undefined' ? 'self' : 'global';\n\n// good enough ES6 module detection regex - format detections not designed to be accurate, but to handle the 99% use case\nexport var esmRegEx = /(^\\s*|[}\\);\\n]\\s*)(import\\s*(['\"]|(\\*\\s+as\\s+)?(?!type)([^\"'\\(\\)\\n; ]+)\\s*from\\s*['\"]|\\{)|export\\s+\\*\\s+from\\s+[\"']|export\\s*(\\{|default|function|class|var|const|let|async\\s+function))/;\n\nvar leadingCommentAndMetaRegEx = /^(\\s*\\/\\*[^\\*]*(\\*(?!\\/)[^\\*]*)*\\*\\/|\\s*\\/\\/[^\\n]*|\\s*\"[^\"]+\"\\s*;?|\\s*'[^']+'\\s*;?)*\\s*/;\nexport function detectRegisterFormat(source) {\n  var leadingCommentAndMeta = source.match(leadingCommentAndMetaRegEx);\n  return leadingCommentAndMeta && source.substr(leadingCommentAndMeta[0].length, 15) === 'System.register';\n}\n\n// AMD Module Format Detection RegEx\n// define([.., .., ..], ...)\n// define(varName); || define(function(require, exports) {}); || define({})\nvar amdRegEx = /(?:^\\uFEFF?|[^$_a-zA-Z\\xA0-\\uFFFF.])define\\s*\\(\\s*(\"[^\"]+\"\\s*,\\s*|'[^']+'\\s*,\\s*)?\\s*(\\[(\\s*((\"[^\"]+\"|'[^']+')\\s*,|\\/\\/.*\\r?\\n|\\/\\*(.|\\s)*?\\*\\/))*(\\s*(\"[^\"]+\"|'[^']+')\\s*,?)?(\\s*(\\/\\/.*\\r?\\n|\\/\\*(.|\\s)*?\\*\\/))*\\s*\\]|function\\s*|{|[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*\\))/;\n\n/// require('...') || exports[''] = ... || exports.asd = ... || module.exports = ...\nvar cjsExportsRegEx = /(?:^\\uFEFF?|[^$_a-zA-Z\\xA0-\\uFFFF.])(exports\\s*(\\[['\"]|\\.)|module(\\.exports|\\['exports'\\]|\\[\"exports\"\\])\\s*(\\[['\"]|[=,\\.]))/;\nvar commentRegEx = /(^|[^\\\\])(\\/\\*([\\s\\S]*?)\\*\\/|([^:]|^)\\/\\/(.*)$)/mg;\n\nvar stringRegEx = /(\"[^\"\\\\\\n\\r]*(\\\\.[^\"\\\\\\n\\r]*)*\"|'[^'\\\\\\n\\r]*(\\\\.[^'\\\\\\n\\r]*)*')/g;\n\n// used to support leading #!/usr/bin/env in scripts as supported in Node\nvar hashBangRegEx = /^\\#\\!.*/;\n\nexport function detectLegacyFormat (source) {\n  if (source.match(amdRegEx))\n    return 'amd';\n\n  cjsExportsRegEx.lastIndex = 0;\n  cjsRequireRegEx.lastIndex = 0;\n  if (cjsRequireRegEx.exec(source) || cjsExportsRegEx.exec(source))\n    return 'cjs';\n\n  // global is the fallback format\n  return 'global';\n}\n\nfunction sanitizeSourceMap (address, sourceMap) {\n  var originalName = address.split('!')[0];\n\n  // force set the filename of the original file\n  if (!sourceMap.file || sourceMap.file == address)\n    sourceMap.file = originalName + '!transpiled';\n\n  // force set the sources list if only one source\n  if (!sourceMap.sources || sourceMap.sources.length <= 1 && (!sourceMap.sources[0] || sourceMap.sources[0] === address))\n    sourceMap.sources = [originalName];\n}\n\nfunction transpile (loader, source, key, metadata, processAnonRegister) {\n  if (!loader.transpiler)\n    throw new TypeError('Unable to dynamically transpile ES module\\n   A loader plugin needs to be configured via `SystemJS.config({ transpiler: \\'transpiler-module\\' })`.');\n\n  // deps support for es transpile\n  if (metadata.load.deps) {\n    var depsPrefix = '';\n    for (var i = 0; i < metadata.load.deps.length; i++)\n      depsPrefix += 'import \"' + metadata.load.deps[i] + '\"; ';\n    source = depsPrefix + source;\n  }\n\n  // do transpilation\n  return loader.import.call(loader, loader.transpiler)\n  .then(function (transpiler) {\n    transpiler = transpiler.__useDefault || transpiler;\n\n    // translate hooks means this is a transpiler plugin instead of a raw implementation\n    if (!transpiler.translate)\n      throw new Error(loader.transpiler + ' is not a valid transpiler plugin.');\n\n    // if transpiler is the same as the plugin loader, then don't run twice\n    if (transpiler === metadata.pluginModule)\n      return source;\n\n    // convert the source map into an object for transpilation chaining\n    if (typeof metadata.load.sourceMap === 'string')\n      metadata.load.sourceMap = JSON.parse(metadata.load.sourceMap);\n\n    metadata.pluginLoad = metadata.pluginLoad || {\n      name: key,\n      address: key,\n      source: source,\n      metadata: metadata.load\n    };\n    metadata.load.deps = metadata.load.deps || [];\n\n    return Promise.resolve(transpiler.translate.call(loader, metadata.pluginLoad, metadata.traceOpts))\n    .then(function (source) {\n      // sanitize sourceMap if an object not a JSON string\n      var sourceMap = metadata.load.sourceMap;\n      if (sourceMap && typeof sourceMap === 'object')\n        sanitizeSourceMap(key, sourceMap);\n\n      if (metadata.load.format === 'esm' && detectRegisterFormat(source))\n        metadata.load.format = 'register';\n\n      return source;\n    });\n  }, function (err) {\n    throw addToError(err, 'Unable to load transpiler to transpile ' + key);\n  });\n}\n\n// detect any meta header syntax\n// only set if not already set\nvar metaRegEx = /^(\\s*\\/\\*[^\\*]*(\\*(?!\\/)[^\\*]*)*\\*\\/|\\s*\\/\\/[^\\n]*|\\s*\"[^\"]+\"\\s*;?|\\s*'[^']+'\\s*;?)+/;\nvar metaPartRegEx = /\\/\\*[^\\*]*(\\*(?!\\/)[^\\*]*)*\\*\\/|\\/\\/[^\\n]*|\"[^\"]+\"\\s*;?|'[^']+'\\s*;?/g;\n\nfunction setMetaProperty(target, p, value) {\n  var pParts = p.split('.');\n  var curPart;\n  while (pParts.length > 1) {\n    curPart = pParts.shift();\n    target = target[curPart] = target[curPart] || {};\n  }\n  curPart = pParts.shift();\n  if (target[curPart] === undefined)\n    target[curPart] = value;\n}\n\nfunction readMetaSyntax (source, metadata) {\n  var meta = source.match(metaRegEx);\n  if (!meta)\n    return;\n\n  var metaParts = meta[0].match(metaPartRegEx);\n\n  for (var i = 0; i < metaParts.length; i++) {\n    var curPart = metaParts[i];\n    var len = curPart.length;\n\n    var firstChar = curPart.substr(0, 1);\n    if (curPart.substr(len - 1, 1) == ';')\n      len--;\n\n    if (firstChar != '\"' && firstChar != \"'\")\n      continue;\n\n    var metaString = curPart.substr(1, curPart.length - 3);\n    var metaName = metaString.substr(0, metaString.indexOf(' '));\n\n    if (metaName) {\n      var metaValue = metaString.substr(metaName.length + 1, metaString.length - metaName.length - 1);\n\n      if (metaName === 'deps')\n        metaName = 'deps[]';\n\n      if (metaName.substr(metaName.length - 2, 2) === '[]') {\n        metaName = metaName.substr(0, metaName.length - 2);\n        metadata.load[metaName] = metadata.load[metaName] || [];\n        metadata.load[metaName].push(metaValue);\n      }\n      // \"use strict\" is not meta\n      else if (metaName !== 'use') {\n        setMetaProperty(metadata.load, metaName, metaValue);\n      }\n    }\n    else {\n      metadata.load[metaString] = true;\n    }\n  }\n}\n","import RegisterLoader from 'es-module-loader/core/register-loader.js';\nimport { warn, isBrowser, global, baseURI, CONFIG, METADATA, ModuleNamespace, emptyModule, isModule } from './common.js';\n\nimport { getConfig, getConfigItem, setConfig } from './config.js';\nimport { decanonicalize, normalize, normalizeSync } from './resolve.js';\nimport { instantiate, nodeRequire } from './instantiate.js';\nimport formatHelpers from './format-helpers.js';\n\nexport default SystemJSLoader;\n\nvar scriptSrc;\n\n// Promise detection and error message\nif (typeof Promise === 'undefined')\n  throw new Error('SystemJS needs a Promise polyfill.');\n\nif (typeof document !== 'undefined') {\n  var scripts = document.getElementsByTagName('script');\n  var curScript = scripts[scripts.length - 1];\n  if (document.currentScript && (curScript.defer || curScript.async))\n    curScript = document.currentScript;\n\n  scriptSrc = curScript && curScript.src;\n}\n// worker\nelse if (typeof importScripts !== 'undefined') {\n  try {\n    throw new Error('_');\n  }\n  catch (e) {\n    e.stack.replace(/(?:at|@).*(http.+):[\\d]+:[\\d]+/, function(m, url) {\n      scriptSrc = url;\n    });\n  }\n}\n// node\nelse if (typeof __filename !== 'undefined') {\n  scriptSrc = __filename;\n}\n\nfunction SystemJSLoader () {\n  RegisterLoader.call(this);\n\n  // NB deprecate\n  this._loader = {};\n\n  // internal metadata store\n  this[METADATA] = {};\n\n  // internal configuration\n  this[CONFIG] = {\n    baseURL: baseURI,\n    paths: {},\n\n    packageConfigPaths: [],\n    packageConfigKeys: [],\n    map: {},\n    packages: {},\n    depCache: {},\n    meta: {},\n    bundles: {},\n\n    production: false,\n\n    transpiler: undefined,\n    loadedBundles: {},\n\n    // global behaviour flags\n    warnings: false,\n    pluginFirst: false,\n\n    // enable wasm loading and detection when supported\n    wasm: false\n  };\n\n  // make the location of the system.js script accessible (if any)\n  this.scriptSrc = scriptSrc;\n\n  this._nodeRequire = nodeRequire;\n\n  // support the empty module, as a concept\n  this.registry.set('@empty', emptyModule);\n\n  setProduction.call(this, false, false);\n\n  // add module format helpers\n  formatHelpers(this);\n}\n\nexport var envModule;\nexport function setProduction (isProduction, isBuilder) {\n  this[CONFIG].production = isProduction;\n  this.registry.set('@system-env', envModule = this.newModule({\n    browser: isBrowser,\n    node: !!this._nodeRequire,\n    production: !isBuilder && isProduction,\n    dev: isBuilder || !isProduction,\n    build: isBuilder,\n    'default': true\n  }));\n}\n\nSystemJSLoader.prototype = Object.create(RegisterLoader.prototype);\n\nSystemJSLoader.prototype.constructor = SystemJSLoader;\n\n// NB deprecate normalize\nSystemJSLoader.prototype[SystemJSLoader.resolve = RegisterLoader.resolve] = SystemJSLoader.prototype.normalize = normalize;\n\nSystemJSLoader.prototype.load = function (key, parentKey) {\n  warn.call(this[CONFIG], 'System.load is deprecated.');\n  return this.import(key, parentKey);\n};\n\n// NB deprecate decanonicalize, normalizeSync\nSystemJSLoader.prototype.decanonicalize = SystemJSLoader.prototype.normalizeSync = SystemJSLoader.prototype.resolveSync = normalizeSync;\n\nSystemJSLoader.prototype[SystemJSLoader.instantiate = RegisterLoader.instantiate] = instantiate;\n\nSystemJSLoader.prototype.config = setConfig;\nSystemJSLoader.prototype.getConfig = getConfig;\n\nSystemJSLoader.prototype.global = global;\n\nSystemJSLoader.prototype.import = function () {\n  return RegisterLoader.prototype.import.apply(this, arguments)\n  .then(function (m) {\n    return '__useDefault' in m ? m.__useDefault : m;\n  });\n};\n\nexport var configNames = ['baseURL', 'map', 'paths', 'packages', 'packageConfigPaths', 'depCache', 'meta', 'bundles', 'transpiler', 'warnings', 'pluginFirst', 'production', 'wasm'];\n\nvar hasProxy = typeof Proxy !== 'undefined';\nfor (var i = 0; i < configNames.length; i++) (function (configName) {\n  Object.defineProperty(SystemJSLoader.prototype, configName, {\n    get: function () {\n      var cfg = getConfigItem(this[CONFIG], configName);\n\n      if (hasProxy && typeof cfg === 'object')\n        cfg = new Proxy(cfg, {\n          set: function (target, option) {\n            throw new Error('Cannot set SystemJS.' + configName + '[\"' + option + '\"] directly. Use SystemJS.config({ ' + configName + ': { \"' + option + '\": ... } }) rather.');\n          }\n        });\n\n      //if (typeof cfg === 'object')\n      //  warn.call(this[CONFIG], 'Referencing `SystemJS.' + configName + '` is deprecated. Use the config getter `SystemJS.getConfig(\\'' + configName + '\\')`');\n      return cfg;\n    },\n    set: function (name) {\n      throw new Error('Setting `SystemJS.' + configName + '` directly is no longer supported. Use `SystemJS.config({ ' + configName + ': ... })`.');\n    }\n  });\n})(configNames[i]);\n\n/*\n * Backwards-compatible registry API, to be deprecated\n */\nfunction registryWarn(loader, method) {\n  warn.call(loader[CONFIG], 'SystemJS.' + method + ' is deprecated for SystemJS.registry.' + method);\n}\nSystemJSLoader.prototype.delete = function (key) {\n  registryWarn(this, 'delete');\n  return this.registry.delete(key);\n};\nSystemJSLoader.prototype.get = function (key) {\n  registryWarn(this, 'get');\n  return this.registry.get(key);\n};\nSystemJSLoader.prototype.has = function (key) {\n  registryWarn(this, 'has');\n  return this.registry.has(key);\n};\nSystemJSLoader.prototype.set = function (key, module) {\n  registryWarn(this, 'set');\n  return this.registry.set(key, module);\n};\nSystemJSLoader.prototype.newModule = function (bindings) {\n  return new ModuleNamespace(bindings);\n};\nSystemJSLoader.prototype.isModule = isModule;\n\n// ensure System.register and System.registerDynamic decanonicalize\nSystemJSLoader.prototype.register = function (key, deps, declare) {\n  if (typeof key === 'string')\n    key = decanonicalize.call(this, this[CONFIG], key);\n  return RegisterLoader.prototype.register.call(this, key, deps, declare);\n};\n\nSystemJSLoader.prototype.registerDynamic = function (key, deps, executingRequire, execute) {\n  if (typeof key === 'string')\n    key = decanonicalize.call(this, this[CONFIG], key);\n  return RegisterLoader.prototype.registerDynamic.call(this, key, deps, executingRequire, execute);\n};\n","import { global, isBrowser, isWorker } from './common.js';\nimport SystemJSLoader from './systemjs-loader.js';\n\nSystemJSLoader.prototype.version = VERSION;\n\nvar System = new SystemJSLoader();\n\n// only set the global System on the global in browsers\nif (isBrowser || isWorker)\n  global.SystemJS = global.System = System;\n\nif (typeof module !== 'undefined' && module.exports)\n  module.exports = System;\n"]}